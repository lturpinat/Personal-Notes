<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Notes Linux</title>
<!-- 2016-12-29 Thu 15:43 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="lturpinat" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Notes Linux</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Gentoo</a>
<ul>
<li><a href="#sec-1-1">1.1. Installation rapide de Gentoo</a>
<ul>
<li><a href="#sec-1-1-1">1.1.1. Formatage du disque</a></li>
<li><a href="#sec-1-1-2">1.1.2. Stage3</a></li>
<li><a href="#sec-1-1-3">1.1.3. Chrooting</a></li>
<li><a href="#sec-1-1-4">1.1.4. Utilisateurs et <i>make.conf</i></a></li>
<li><a href="#sec-1-1-5">1.1.5. Portage</a></li>
<li><a href="#sec-1-1-6">1.1.6. Paramétrage de <i>fstab</i></a></li>
<li><a href="#sec-1-1-7">1.1.7. Sélection d'un profil</a></li>
<li><a href="#sec-1-1-8">1.1.8. Fuseau horaire</a></li>
<li><a href="#sec-1-1-9">1.1.9. Fichiers de configuration</a></li>
<li><a href="#sec-1-1-10">1.1.10. Le Kernel</a></li>
<li><a href="#sec-1-1-11">1.1.11. L'amorceur (bootloader)</a></li>
<li><a href="#sec-1-1-12">1.1.12. Outils réseaux</a></li>
<li><a href="#sec-1-1-13">1.1.13. Redémarrage</a></li>
<li><a href="#sec-1-1-14">1.1.14. Dernière phase</a></li>
<li><a href="#sec-1-1-15">1.1.15. Sources</a></li>
</ul>
</li>
<li><a href="#sec-1-2">1.2. Le clavier</a></li>
<li><a href="#sec-1-3">1.3. Outils vfat (FAT32)</a></li>
<li><a href="#sec-1-4">1.4. Support du NTFS</a>
<ul>
<li><a href="#sec-1-4-1">1.4.1. Kernel</a></li>
<li><a href="#sec-1-4-2">1.4.2. Outil</a></li>
</ul>
</li>
<li><a href="#sec-1-5">1.5. Emacs et polices de caractères</a></li>
<li><a href="#sec-1-6">1.6. Support du NFS</a>
<ul>
<li><a href="#sec-1-6-1">1.6.1. Kernel</a></li>
<li><a href="#sec-1-6-2">1.6.2. Outil</a></li>
<li><a href="#sec-1-6-3">1.6.3. OpenRC</a></li>
<li><a href="#sec-1-6-4">1.6.4. Exemple de montage</a></li>
</ul>
</li>
<li><a href="#sec-1-7">1.7. cmus-notify</a>
<ul>
<li><a href="#sec-1-7-1">1.7.1. Script</a></li>
<li><a href="#sec-1-7-2">1.7.2. Fonctionnement</a></li>
</ul>
</li>
<li><a href="#sec-1-8">1.8. OpenVPN</a></li>
<li><a href="#sec-1-9">1.9. Logitech MX Master (souris)</a></li>
<li><a href="#sec-1-10">1.10. Optimisation matérielle pour les laptops</a></li>
<li><a href="#sec-1-11">1.11. Mise à jour hebdomadaire</a></li>
</ul>
</li>
<li><a href="#sec-2">2. Général</a>
<ul>
<li><a href="#sec-2-1">2.1. Compatibilité R.A.T.3</a></li>
<li><a href="#sec-2-2">2.2. Trucs pour la Logitech MX Master</a>
<ul>
<li><a href="#sec-2-2-1">2.2.1. Activer le scrolling horizontal</a></li>
</ul>
</li>
<li><a href="#sec-2-3">2.3. Réactiver le son après une sortie de veille</a></li>
<li><a href="#sec-2-4">2.4. KDE</a>
<ul>
<li><a href="#sec-2-4-1">2.4.1. Activer la touche Windows pour afficher le launcher</a></li>
</ul>
</li>
<li><a href="#sec-2-5">2.5. Transformer un .deb en .rpm</a></li>
<li><a href="#sec-2-6">2.6. Mettre flash-player sur Firefox</a></li>
<li><a href="#sec-2-7">2.7. Gérer l'audio avec pactl (moins fiable)</a></li>
<li><a href="#sec-2-8">2.8. Gérer l'audio avec amixer (plus fiable)</a></li>
<li><a href="#sec-2-9">2.9. Activer le pavé numérique au démarrage de LightDM</a></li>
<li><a href="#sec-2-10">2.10. Gestion de la luminosité : xbacklight</a></li>
<li><a href="#sec-2-11">2.11. NVIDIA</a>
<ul>
<li><a href="#sec-2-11-1">2.11.1. Configuration basique</a></li>
<li><a href="#sec-2-11-2">2.11.2. Problème de tearing</a></li>
</ul>
</li>
<li><a href="#sec-2-12">2.12. Accèder aux documents d'un téléphone utilisant MTP</a></li>
<li><a href="#sec-2-13">2.13. Rediriger sa sortie audio vers un serveur DLNA</a></li>
</ul>
</li>
<li><a href="#sec-3">3. Technique</a>
<ul>
<li><a href="#sec-3-1">3.1. Bash</a>
<ul>
<li><a href="#sec-3-1-1">3.1.1. Liens utiles</a></li>
<li><a href="#sec-3-1-2">3.1.2. Commandes utiles</a></li>
<li><a href="#sec-3-1-3">3.1.3. Convertir une variable en base X</a></li>
<li><a href="#sec-3-1-4">3.1.4. Correction intelligente de script</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-4">4. Applications</a>
<ul>
<li><a href="#sec-4-1">4.1. Skype - désactiver le lancement au démarrage</a></li>
<li><a href="#sec-4-2">4.2. Tmux</a></li>
<li><a href="#sec-4-3">4.3. Terminal</a>
<ul>
<li><a href="#sec-4-3-1">4.3.1. [Préférence] Changer la police de caractère du terminal</a></li>
</ul>
</li>
<li><a href="#sec-4-4">4.4. Emacs</a>
<ul>
<li><a href="#sec-4-4-1">4.4.1. Problème de police avec Emacs</a></li>
<li><a href="#sec-4-4-2">4.4.2. Avoir la météo</a></li>
<li><a href="#sec-4-4-3">4.4.3. Exporter en html avec coloration syntaxique des <i>src</i></a></li>
<li><a href="#sec-4-4-4">4.4.4. org-mode</a></li>
<li><a href="#sec-4-4-5">4.4.5. Correction automatique scripts shell avec ShellCheck</a></li>
<li><a href="#sec-4-4-6">4.4.6. Faire des présentations avec org-mode et Reveal.js</a></li>
</ul>
</li>
<li><a href="#sec-4-5">4.5. mkvmerge</a></li>
<li><a href="#sec-4-6">4.6. cmus-notify</a>
<ul>
<li><a href="#sec-4-6-1">4.6.1. Script</a></li>
<li><a href="#sec-4-6-2">4.6.2. Fonctionnement</a></li>
</ul>
</li>
<li><a href="#sec-4-7">4.7. MPD</a>
<ul>
<li><a href="#sec-4-7-1">4.7.1. Configurqation de MPD</a></li>
<li><a href="#sec-4-7-2">4.7.2. MPC</a></li>
<li><a href="#sec-4-7-3">4.7.3. Autres clients</a></li>
</ul>
</li>
<li><a href="#sec-4-8">4.8. Rofi</a>
<ul>
<li><a href="#sec-4-8-1">4.8.1. Commande personnalisée</a></li>
<li><a href="#sec-4-8-2">4.8.2. Thème</a></li>
</ul>
</li>
<li><a href="#sec-4-9">4.9. Weechat</a>
<ul>
<li><a href="#sec-4-9-1">4.9.1. Thème</a></li>
<li><a href="#sec-4-9-2">4.9.2. Autres configurations intéressantes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<hr  />


<div class="figure">
<p><img src="./linux.png" alt="linux.png" align="center" />
</p>
</div>

<div class="hint">
<p>
La machine utilisée est un <code>Asus G75VX</code>
</p>

</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Gentoo</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> Installation rapide de Gentoo</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> Formatage du disque</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Création de 4 partitions pour une installation GPT/UEFI
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Partition</th>
<th scope="col" class="left">Nom supposé sur un disque <i>sda</i></th>
<th scope="col" class="left">Point de montage</th>
<th scope="col" class="left">Format</th>
<th scope="col" class="left">Particularité</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">boot</td>
<td class="left">/dev/sda1</td>
<td class="left">/boot</td>
<td class="left">ext2(4)</td>
<td class="left">Partition de boot</td>
</tr>

<tr>
<td class="left">UEFI</td>
<td class="left">/dev/sda2</td>
<td class="left">/boot/efi</td>
<td class="left">vfat (FAT32)</td>
<td class="left">Partition de boot de l'UEFI</td>
</tr>

<tr>
<td class="left">swap</td>
<td class="left">/dev/sda3</td>
<td class="left">&#xa0;</td>
<td class="left">swap</td>
<td class="left">Partition de swap</td>
</tr>

<tr>
<td class="left">rootfs</td>
<td class="left">/dev/sda4</td>
<td class="left">/</td>
<td class="left">ext4</td>
<td class="left">Partition principale</td>
</tr>
</tbody>
</table>
</div>
<ol class="org-ol"><li><a id="sec-1-1-1-1" name="sec-1-1-1-1"></a>Création des partitions <i>gdisk</i><br  /><div class="outline-text-5" id="text-1-1-1-1">
<pre class="example">
root #gdisk /dev/sda

Create GPT partition table:
Command: o ↵
This option deletes all partitions and creates a new protective MBR.
Proceed? (Y/N): y ↵

Create Partition 1 (/boot):
Command: n ↵
Partition Number: 1 ↵
First sector: ↵
Last sector: +128M ↵
Hex Code: ↵

Create Partition 2 (UEFI ESP):
Command: n ↵
Partition Number: 2 ↵
First sector: ↵
Last sector: +32M ↵
Hex Code: EF00 ↵

Create Partition 3 (swap):
Command: n ↵
Partition Number: 3 ↵
First sector: ↵
Last sector: +1024MB ↵
Hex Code: 8200 ↵

Create Partition 4 (/):
Command: n ↵
Partition Number: 4 ↵
First sector: ↵
Last sector: ↵ (for rest of disk)
Hex Code: ↵

Write Partition Table To Disk:
Command: w ↵
Do you want to proceed? (Y/N): Y ↵
</pre>
</div>
</li>
<li><a id="sec-1-1-1-2" name="sec-1-1-1-2"></a>Formatage des partitions<br  /><div class="outline-text-5" id="text-1-1-1-2">
<div class="org-src-container">

<pre class="src src-bash">#Formatage de boot et rootfs en ext4
mkfs.ext4 /dev/sda1
mkfs.ext4 /dev/sda4
#Formatage et activation de la partition swap
mkswap /dev/sda3 &amp;&amp; swapon /dev/sda3
#Formatage de UEFI en vfat
mkfs.vfat /dev/sda2
</pre>
</div>
</div>
</li>
<li><a id="sec-1-1-1-3" name="sec-1-1-1-3"></a>Montage des partitions<br  /><div class="outline-text-5" id="text-1-1-1-3">
<div class="org-src-container">

<pre class="src src-bash">#Montage de rootfs dans /mnt/gentoo
mkdir -p /mnt/gentoo
mount /dev/sda4 /mnt/gentoo
#Montage de boot dans /mnt/gentoo/boot
mkdir /mnt/gentoo/boot
mount /dev/sda1 /mnt/gentoo/boot
#Montage de UEFI dans /mnt/gentoo/boot/efi
mkdir /mnt/gentoo/boot/efi
mount /dev/sda2 /mnt/gentoo/boot/efi
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> Stage3</h4>
<div class="outline-text-4" id="text-1-1-2">
</div><ol class="org-ol"><li><a id="sec-1-1-2-1" name="sec-1-1-2-1"></a>Précaution : la date<br  /><div class="outline-text-5" id="text-1-1-2-1">
<p>
Afin d'éviter tout problème de date pour la suite de l'installation, la définir :
</p>
<div class="org-src-container">

<pre class="src src-bash"># Format : mois - jour - heure - minutes - année
date MMJJhhmmAAAAA
</pre>
</div>
</div>
</li>
<li><a id="sec-1-1-2-2" name="sec-1-1-2-2"></a>Téléchargement du tarball<br  /><div class="outline-text-5" id="text-1-1-2-2">
<ul class="org-ul">
<li>Trouver le repos adapaté sur le site, depuis la console grâce à links (navigateur web console) :
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">cd /mnt/gentoo
links https://www.gentoo.org/downloads/mirrors
</pre>
</div>
<ul class="org-ul">
<li>Arriver sur un lien du style "<a href="http://gentoo.mirrors.ovh.net/gentoo-distfiles/releases/amd64/autobuilds/current-stage3-amd64/stage3-amd64-20161027.tar.bz2">http://gentoo.mirrors.ovh.net/gentoo-distfiles/releases/amd64/autobuilds/current-stage3-amd64/stage3-amd64-20161027.tar.bz2</a>"
</li>
<li>Lancer le téléchargement grâce au raccourci <i>CTRL+D</i>
</li>
</ul>
</div>
</li>
<li><a id="sec-1-1-2-3" name="sec-1-1-2-3"></a>Décompression du tarball<br  /><div class="outline-text-5" id="text-1-1-2-3">
<div class="org-src-container">

<pre class="src src-bash">tar xjpf stage3*
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> Chrooting</h4>
<div class="outline-text-4" id="text-1-1-3">
</div><ol class="org-ol"><li><a id="sec-1-1-3-1" name="sec-1-1-3-1"></a>"Liaison" de /sys et /dev avec le nouveau système<br  /><div class="outline-text-5" id="text-1-1-3-1">
<div class="org-src-container">

<pre class="src src-bash">cd /
mount -t proc proc /mnt/gentoo/proc
mount --rbind /sys /mnt/gentoo/sys
mount --make-rslave /mnt/gentoo/sys
mount --rbind /dev /mnt/gentoo/dev
mount --make-rslave /mnt/gentoo/dev
</pre>
</div>

<div class="note">
<p>
Selon le Handbook, les commandes contenant "&#x2013;make-rslave" importent si le choix du système d'initilisation se porte sur systemd (si l'on ne souhaite pas prendre OpenRC).
</p>

</div>
</div>
</li>
<li><a id="sec-1-1-3-2" name="sec-1-1-3-2"></a>Transfert<br  /><div class="outline-text-5" id="text-1-1-3-2">
<div class="org-src-container">

<pre class="src src-bash">#Transfert du fichier spécifiant le ou les serveurs DNS à utiliser pour résoudre un nom de domaine
cp /etc/resolv.conf /mnt/gentoo/etc
#Chrooting
chroot /mnt/gentoo /bin/bash
#Rechargement de la nouvelle configuration
source /etc/profile
#Petit indicateur pour se souvenir que l'on a chrooté
export PS1="(chroot) $PS1"
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4"><span class="section-number-4">1.1.4</span> Utilisateurs et <i>make.conf</i></h4>
<div class="outline-text-4" id="text-1-1-4">
</div><ol class="org-ol"><li><a id="sec-1-1-4-1" name="sec-1-1-4-1"></a>Utilisateurs<br  /><div class="outline-text-5" id="text-1-1-4-1">
<ul class="org-ul">
<li>Modification du mot de passe <i>root</i>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">passwd
</pre>
</div>
<ul class="org-ul">
<li>Ajout d'un utilisateur
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">#Ajout de l'utilisateur
useradd -g users -G wheel,portage,audio,video,usb,cdrom -m &lt;nom-utilisateur&gt;
#Modification du mot de passe
passwd &lt;nom-utilisateur&gt;
</pre>
</div>
</div>
</li>
<li><a id="sec-1-1-4-2" name="sec-1-1-4-2"></a>Configuration de <i>make.conf</i><br  /><div class="outline-text-5" id="text-1-1-4-2">
<p>
Modifications à effectuer dans le fichier :
</p>
<pre class="example">
CFLAGS="-march=native -02 -pipe"
MAKEOPTS="-j5"			#Permet la compilation parallèle ; remplacer "5" par le nombre de coeurs plus 1 est conseillé
USE="python icu bindist mmx sse sse2"	 #Quelques USE flags basiques à ajouter
VIDEO_CARDS=" "			#Il est préférable de ne spécifier votre carte graphique qu'une fois que votre système de base fonctionne (ex: nvidia)
</pre>

<div class="note">
<p>
Dans le cas de ma configuration (<code>Asus G75VX</code>), mon processeur est le suivant : <code>Intel(R) Core(TM) i7-3630QM CPU @ 2.40GHz</code> (IvyBridge).
</p>

<p>
Comme il s'agit d'un Ivy Bridge Core, Gentoo recommande les variables suivantes :
</p>

<div class="org-src-container">

<pre class="src src-bash">CHOST="x86_64-pc-linux-gnu"
CFLAGS="-march=core-avx-i -O2 -pipe"
CXXFLAGS="${CFLAGS}"
</pre>
</div>

</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-1-5" class="outline-4">
<h4 id="sec-1-1-5"><span class="section-number-4">1.1.5</span> Portage</h4>
<div class="outline-text-4" id="text-1-1-5">
<p>
Synchronisation initiale de portage :
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge-webrsync
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-6" class="outline-4">
<h4 id="sec-1-1-6"><span class="section-number-4">1.1.6</span> Paramétrage de <i>fstab</i></h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
Editer <b>/etc/fstab</b> en accord avec les partitions générées plus haut :
</p>
<pre class="example">
/dev/sda1   /boot       ext4(ou ext2, selon)    noauto,noatime 1 2
/dev/sda4   /           ext4                    noatime        0 1
/dev/sda3   none        swap                    sw             0 0
</pre>

<div class="hint">
<p>
Normalement, la partition UEFI est automatique gérée (ie. détectée), il n'est donc pas nécessaire de l'ajouter à <i>fstab</i>.
</p>

</div>
</div>
</div>
<div id="outline-container-sec-1-1-7" class="outline-4">
<h4 id="sec-1-1-7"><span class="section-number-4">1.1.7</span> Sélection d'un profil</h4>
<div class="outline-text-4" id="text-1-1-7">
<p>
Sélectionner le profile convenant à votre future machine :
</p>
<div class="org-src-container">

<pre class="src src-bash">#Afficher les différents profiles disponibles
eselect profile list 
#Sélectioner le profile désiré
eselect profile set &lt;id-profile&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-8" class="outline-4">
<h4 id="sec-1-1-8"><span class="section-number-4">1.1.8</span> Fuseau horaire</h4>
<div class="outline-text-4" id="text-1-1-8">
<div class="org-src-container">

<pre class="src src-bash">#Récupérer la localisation du fuseau horaire désiré
ls /usr/share/zoneinfo
#Le sauvegarder dans /etc/timezone ; ici exemple avec Paris
echo "Europe/Paris" &gt; /etc/timezone
#Installation des configurations du fuseau
emerge --config sys-libs/timezone-data
#Editer le fichier et "décommenter" les locales requises
nano /etc/locale.gen
#Générer les locales
locale-gen
#Selectionner la locale principale
eselect locale list
eselect locale set &lt;locale-id&gt;
</pre>
</div>

<div class="note">
<p>
Personnellement je rajoute (toujours avec l'exemple de Paris) pour être sûr : 
</p>
<div class="org-src-container">

<pre class="src src-bash">ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime
</pre>
</div>

</div>

<div class="note">
<p>
Il y a également moyen de préciser la variable LC_COLLATE (intéressant pour les globs) : 
</p>

<p>
Editer */etc/env.d/02locale
</p>
<div class="org-src-container">

<pre class="src src-bash">LC_COLLATE="C"
</pre>
</div>

</div>

<p>
Recharger la nouvelle configuration :
</p>
<div class="org-src-container">

<pre class="src src-bash">env-update &amp;&amp; source /etc/profile &amp;&amp; export PS1="(chroot) $PS1"
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-9" class="outline-4">
<h4 id="sec-1-1-9"><span class="section-number-4">1.1.9</span> Fichiers de configuration</h4>
<div class="outline-text-4" id="text-1-1-9">
</div><ol class="org-ol"><li><a id="sec-1-1-9-1" name="sec-1-1-9-1"></a>Le nom d'hôte (hostname)<br  /><div class="outline-text-5" id="text-1-1-9-1">
<p>
Editer <b>/etc/conf.d/hostname</b>
</p>
</div>
</li>
<li><a id="sec-1-1-9-2" name="sec-1-1-9-2"></a>L'agencement des touches (keymap)<br  /><div class="outline-text-5" id="text-1-1-9-2">
<p>
Editer <b>/etc/conf.d/keymaps</b>
</p>
</div>
</li>
<li><a id="sec-1-1-9-3" name="sec-1-1-9-3"></a>L'heure<br  /><div class="outline-text-5" id="text-1-1-9-3">
<p>
À modifier, surtout dans le cas d'une cohabitation avec Windows (cf. commentaires du fichier)
Editer <b>/etc/conf.d/hwclock</b>
</p>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-1-10" class="outline-4">
<h4 id="sec-1-1-10"><span class="section-number-4">1.1.10</span> Le Kernel</h4>
<div class="outline-text-4" id="text-1-1-10">
<div class="org-src-container">

<pre class="src src-bash">#Installation du kernel vanilla de Gentoo
emerge -av sys-kernel/gentoo-sources sys-kernel/linux-firmware
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="sec-1-1-10-1" name="sec-1-1-10-1"></a>Configuration automatique<br  /><div class="outline-text-5" id="text-1-1-10-1">
<div class="org-src-container">

<pre class="src src-bash">#Garde les modules chargés par la LiveCD
make localyesconfig
make -j2
</pre>
</div>
</div>
</li>
<li><a id="sec-1-1-10-2" name="sec-1-1-10-2"></a>Configuration manuelle<br  /><div class="outline-text-5" id="text-1-1-10-2">
<p>
<b>Soon&#x2026;</b>
</p>
</div>
</li>
<li><a id="sec-1-1-10-3" name="sec-1-1-10-3"></a>Installation<br  /><div class="outline-text-5" id="text-1-1-10-3">
<div class="org-src-container">

<pre class="src src-bash">#Installation des modules
make modules_install
#Installation du kernel
make install
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-1-1-11" class="outline-4">
<h4 id="sec-1-1-11"><span class="section-number-4">1.1.11</span> L'amorceur (bootloader)</h4>
<div class="outline-text-4" id="text-1-1-11">
<ul class="org-ul">
<li>Comme l'installation se fait en UEFI, il faut le préciser dans le fichier <b>/etc/portage/make.conf</b> :
</li>
</ul>
<pre class="example">
GRUB_PLATFORMS="efi-64"
</pre>

<ul class="org-ul">
<li>Installation et configuration de GRUB2
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">#Installation de GRUB2
emerge -av sys-boot/grub
#Installation de grub en uefi sur le disque
grub-install --target=x86_64-efi /dev/sda
#Génération du fichier de configuration (contenant les partitions sur lesquelles booter)
grub-mkconfig -o /boot/grub/grub.cfg
</pre>
</div>

<div class="hint">
<p>
Si GRUB n'apparaît pas au redémarrage, il suffit : 
</p>
<ul class="org-ul">
<li>De relancer la LiveCD
</li>
<li>De monter les partitions rootfs, boot et UEFI
</li>
<li>De chrooter dans rootfs
</li>
<li>De retapper les deux dernières commandes de "Installation et configuration de GRUB2"
</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-sec-1-1-12" class="outline-4">
<h4 id="sec-1-1-12"><span class="section-number-4">1.1.12</span> Outils réseaux</h4>
<div class="outline-text-4" id="text-1-1-12">
<p>
Afin de pouvoir avoir accès à internet au redémarrage, il est nécessaire d'installer différents outils réseaux :
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge --ask sys-apps/iproute2 net-misc/dhcpcd net-wireless/wireless-tools net-wireless/iw net-wireless/wpa_supplicant
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-13" class="outline-4">
<h4 id="sec-1-1-13"><span class="section-number-4">1.1.13</span> Redémarrage</h4>
<div class="outline-text-4" id="text-1-1-13">
<div class="org-src-container">

<pre class="src src-bash">#Quitter le chroot (le petit indicateur "(chroot)" devrait disparaître
exit
#Démonter les partitions proprement
cd /mnt
umount -R gentoo
#Redémarrer
reboot
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-14" class="outline-4">
<h4 id="sec-1-1-14"><span class="section-number-4">1.1.14</span> Dernière phase</h4>
<div class="outline-text-4" id="text-1-1-14">
<p>
Pour terminer l'installation, il faut installer et mettre à jour tous les packages de votre profil qui vous permettront d'avoir un système fonctionnel. Pour cela, connectez vous en root :
</p>
<div class="org-src-container">

<pre class="src src-bash">#Supprimer le tarball du stage3, désormais inutile
cd /
rm -f stage3*
#Lancer la mise à jour compléte du système
emerge -uvDNa world
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-1-15" class="outline-4">
<h4 id="sec-1-1-15"><span class="section-number-4">1.1.15</span> Sources</h4>
<div class="outline-text-4" id="text-1-1-15">
<p>
Certains passages sont directement tirés de ces différentes sources :
</p>
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/Handbook:AMD64">Le Handbook pour AMD64 de gentoo wiki</a>
</li>
<li><a href="https://wiki.gentoo.org/wiki/Quick_Installation_Checklist">La "Quick Installation Checklist" de gentoo wiki</a>
</li>
<li><a href="https://www.youtube.com/watch?v=37bmALK7_ag">Le guide écrit associé à la vidéo YouTube e Humaniac</a>
</li>
<li>Ma propre expérience
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2"><span class="section-number-3">1.2</span> Le clavier</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Permettre au système de gérer la bonne disposition du clavier
</p>
<ul class="org-ul">
<li>Récupérer les informations sur le clavier :
<div class="org-src-container">

<pre class="src src-bash">setxkbmap -print -verbose 10
</pre>
</div>
</li>

<li>Créer un fichier de configuration en conséquence :
<code>/etc/X11/xorg.conf.d/00-keyboard.conf</code>
<div class="org-src-container">

<pre class="src src-bash">Section "InputClass"
     Identifier "system-keyboard"
     MatchIsKeyboard "on"
     Option "XkbLayout" "fr"
     Option "XkbModel" "pc105"/
     Option "XkbVariant" "azerty"
     Option "XkbOptions" "grp:alt_shift_toggle"
EndSection
</pre>
</div>
</li>
</ul>

<p>
<a href="https://wiki.archlinux.org/index.php/Keyboard_configuration_in_Xorg">Source : Archlinux</a>
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3"><span class="section-number-3">1.3</span> Outils vfat (FAT32)</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Pour obtenir les commandes utilisant le système de fichier vfat (ex: "mkfs.vfat")
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge -av sys-fs/dosfstools
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4"><span class="section-number-3">1.4</span> Support du NTFS</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-sec-1-4-1" class="outline-4">
<h4 id="sec-1-4-1"><span class="section-number-4">1.4.1</span> Kernel</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Modifications à effectuer dans le Kernel :
</p>
<ul class="org-ul">
<li>Enabling NTFS using sys-fs/ntfs3g (preferred)
<div class="org-src-container">

<pre class="src src-text">File systems  ---&gt; 
   &lt;*&gt; FUSE (Filesystem in Userspace) support
</pre>
</div>
</li>

<li>Enabling NTFS with limited write support
<div class="org-src-container">

<pre class="src src-text">File systems  ---&gt;
  DOS/FAT/NT Filesystems  ---&gt;
     &lt;*&gt; NTFS file system support
     &lt;*&gt;   NTFS write support
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-1-4-2" class="outline-4">
<h4 id="sec-1-4-2"><span class="section-number-4">1.4.2</span> Outil</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">

<pre class="src src-bash"># emerge -av sys-fs/ntfs3g
</pre>
</div>
<p>
<a href="https://wiki.gentoo.org/wiki/NTFS">Source : Gentoo</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5"><span class="section-number-3">1.5</span> Emacs et polices de caractères</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Il faut activer le USE flag "xft" et compiler Emacs avec.
</p>
<div class="org-src-container">

<pre class="src src-bash">USE="xft"
</pre>
</div>
<p>
<a href="https://wiki.gentoo.org/wiki/Xft_support_for_GNU_Emacs">Source 1 : Gentoo</a>
</p>

<p>
<a href="https://wiki.gentoo.org/wiki/Project:GNU_Emacs/Developer_guide">Source 2 : Gentoo</a>
</p>
</div>
</div>
<div id="outline-container-sec-1-6" class="outline-3">
<h3 id="sec-1-6"><span class="section-number-3">1.6</span> Support du NFS</h3>
<div class="outline-text-3" id="text-1-6">
</div><div id="outline-container-sec-1-6-1" class="outline-4">
<h4 id="sec-1-6-1"><span class="section-number-4">1.6.1</span> Kernel</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Modificiations à effectuer dans le Kernel :
</p>
<div class="org-src-container">

<pre class="src src-text">File systems ---&gt;
  [*] Dnotify support
  [*] Network File Systems ---&gt;
        &lt;*&gt;   NFS client support
        &lt;*&gt;     NFS client support for NFS version 3
        &lt;*&gt;     NFS client support for NFS version 4
        [*]   NFS client support for NFSv4.1
        &lt;*&gt;   NFS server support
        [*]     NFS server support for NFS version 3
        [*]     NFS server support for NFS version 4
        [*]       NFSv4.1 server support for Parallel NFS (pNFS)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-2" class="outline-4">
<h4 id="sec-1-6-2"><span class="section-number-4">1.6.2</span> Outil</h4>
<div class="outline-text-4" id="text-1-6-2">
<div class="org-src-container">

<pre class="src src-bash"># emerge --ask net-fs/nfs-utils
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-3" class="outline-4">
<h4 id="sec-1-6-3"><span class="section-number-4">1.6.3</span> OpenRC</h4>
<div class="outline-text-4" id="text-1-6-3">
<div class="org-src-container">

<pre class="src src-bash"># rc-update add nfsclient default
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-6-4" class="outline-4">
<h4 id="sec-1-6-4"><span class="section-number-4">1.6.4</span> Exemple de montage</h4>
<div class="outline-text-4" id="text-1-6-4">
<pre class="example">
# mount 192.168.0.1:/volume1/home /home
</pre>
<p>
<a href="https://wiki.gentoo.org/index.php?title=Nfs-utils&redirect=no">Source : Gentoo</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-1-7" class="outline-3">
<h3 id="sec-1-7"><span class="section-number-3">1.7</span> cmus-notify</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Permet de gérer le client cmus
</p>
</div>
<div id="outline-container-sec-1-7-1" class="outline-4">
<h4 id="sec-1-7-1"><span class="section-number-4">1.7.1</span> Script</h4>
<div class="outline-text-4" id="text-1-7-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #AEAEAE; font-style: italic;">#</span><span style="color: #AEAEAE; font-style: italic;">!/bin/</span><span style="color: #FBDE2D;">sh</span>
<span style="color: #FF6400;">Cmus_remote</span>=$<span style="color: #8c8c8c;">(</span>cmus-remote -Q<span style="color: #8c8c8c;">)</span>
<span style="color: #FF6400;">Instance</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #94bff3;">echo</span> -e <span style="color: #61CE3C;">"$Cmus_remote"</span> | wc -l<span style="color: #8c8c8c;">)</span>
<span style="color: #FF6400;">Shuffle</span>=<span style="color: #61CE3C;">"Shuffle On"</span>
<span style="color: #FBDE2D;">if</span> <span style="color: #8c8c8c;">[</span> $<span style="color: #FF6400;">Instance</span> = 1 <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
    terminal -e cmus &amp;&amp;
    sleep 2
    cmus-remote -p
<span style="color: #FBDE2D;">else</span>
    <span style="color: #FBDE2D;">if</span> <span style="color: #8c8c8c;">[</span> $<span style="color: #FF6400;">1</span> == <span style="color: #61CE3C;">"-S"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
        <span style="color: #FBDE2D;">if</span> <span style="color: #8c8c8c;">[</span> <span style="color: #fa8072;">`echo "$Cmus_remote" | grep shuffle | cut -d ' ' -f 3`</span> == true <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
            <span style="color: #FF6400;">Shuffle</span>=<span style="color: #61CE3C;">"Shuffle Off"</span>
        <span style="color: #FBDE2D;">fi</span>
        cmus-remote $<span style="color: #FF6400;">1</span>
        notify-send -t 800 $<span style="color: #FF6400;">Shuffle</span>
    <span style="color: #FBDE2D;">elif</span> <span style="color: #8c8c8c;">[</span> $<span style="color: #FF6400;">1</span> == <span style="color: #61CE3C;">"-Q"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
        <span style="color: #FF6400;">Cur_song</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #94bff3;">echo</span> <span style="color: #61CE3C;">"$Cmus_remote"</span> | grep tag | head -n 3 | sort -r | cut -d <span style="color: #61CE3C;">' '</span> -f 3- <span style="color: #8c8c8c;">)</span>
        notify-send -i multimedia-volume-control -t 1800 <span style="color: #61CE3C;">"$Cur_song"</span>
<span style="color: #AEAEAE; font-style: italic;">#        </span><span style="color: #AEAEAE; font-style: italic;">artist=$(echo -e "$Cur_song" | head -n 2 | tail -n 1)</span>
<span style="color: #AEAEAE; font-style: italic;">#        </span><span style="color: #AEAEAE; font-style: italic;">title=$(echo -e "$Cur_song" | head -n 1 )</span>
<span style="color: #AEAEAE; font-style: italic;">#        </span><span style="color: #AEAEAE; font-style: italic;">cmus-updatepidgin artist "$artist" title "$title"</span>
    <span style="color: #FBDE2D;">else</span>
        cmus-remote $<span style="color: #FF6400;">1</span>
        <span style="color: #FF6400;">Cur_song</span>=$<span style="color: #8c8c8c;">(</span>cmus-remote -Q | grep tag | head -n 3 | sort -r | cut -d <span style="color: #61CE3C;">' '</span> -f 3- <span style="color: #8c8c8c;">)</span>
        notify-send -i multimedia-volume-control -t 1800 <span style="color: #61CE3C;">"$Cur_song"</span>
    <span style="color: #FBDE2D;">fi</span>
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-1-7-2" class="outline-4">
<h4 id="sec-1-7-2"><span class="section-number-4">1.7.2</span> Fonctionnement</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
Utiliser le script en spécifiant un argument (cf. '-p') reconnu par cmus-remote
</p>

<p>
Infos sur les arguments :
</p>
<div class="org-src-container">

<pre class="src src-bash">man cmus-remote
</pre>
</div>

<p>
Exemple :
</p>
<pre class="example">
cmus-notify.sh -p #Permet de jouer le morceau sélectionné
</pre>

<p>
<a href="https://colorathis.wordpress.com/2013/06/25/cmus-notify/">Source : colorathis.wordpress.com</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-1-8" class="outline-3">
<h3 id="sec-1-8"><span class="section-number-3">1.8</span> OpenVPN</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Le module TUN/TAP est nécessaire au bon fonctionnement d'OpenVPN : ne pas oublier de l'intégrer au Kernel.
</p>

<p>
<a href="https://wiki.gentoo.org/wiki/OpenVPN">Source : Gentoo</a>
</p>
</div>
</div>
<div id="outline-container-sec-1-9" class="outline-3">
<h3 id="sec-1-9"><span class="section-number-3">1.9</span> Logitech MX Master (souris)</h3>
<div class="outline-text-3" id="text-1-9">
<div class="attention">
<p>
Penser à ajouter les bons modules au Kernel (cf. Logitech) pour une meilleur intégration à Gentoo !
</p>

</div>
</div>
</div>
<div id="outline-container-sec-1-10" class="outline-3">
<h3 id="sec-1-10"><span class="section-number-3">1.10</span> Optimisation matérielle pour les laptops</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Utiliser laptop-mode :
</p>
<div class="org-src-container">

<pre class="src src-sh">emerge --ask app-laptop/laptop-mode-tools
</pre>
</div>
<p>
<a href="https://wiki.gentoo.org/wiki/Power_management/Guide">Source : Gentoo</a>
</p>
</div>
</div>
<div id="outline-container-sec-1-11" class="outline-3">
<h3 id="sec-1-11"><span class="section-number-3">1.11</span> Mise à jour hebdomadaire</h3>
<div class="outline-text-3" id="text-1-11">
<div class="org-src-container">

<pre class="src src-bash">#Mise à jour de portage : 
emerge --sync
#Mise à jour du système : 
emerge -uNDv world
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Général</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Compatibilité R.A.T.3</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Editer "/etc/X11/xorg.conf"
</p>
<div class="org-src-container">

<pre class="src src-sh">Section <span style="color: #61CE3C;">"InputClass"</span>
Identifier <span style="color: #61CE3C;">"Mouse Remap"</span>
MatchProduct <span style="color: #61CE3C;">"Saitek Cyborg R.A.T.3 Mouse"</span>
MatchDevicePath <span style="color: #61CE3C;">"/dev/input/event*"</span>
Option <span style="color: #61CE3C;">"ButtonMapping"</span> <span style="color: #61CE3C;">"1 2 3 4 5 0 0 8 9 0 0 0 13 14"</span>
EndSection
</pre>
</div>
<p>
<a href="http://forums.fedora-fr.org/viewtopic.php?id=64212">Source : forum fedora-fr</a>
</p>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Trucs pour la Logitech MX Master</h3>
<div class="outline-text-3" id="text-2-2">
</div><div id="outline-container-sec-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> Activer le scrolling horizontal</h4>
<div class="outline-text-4" id="text-2-2-1">
<div class="org-src-container">

<pre class="src src-sh">xinput set-prop <span style="color: #61CE3C;">"Logitech MX Master"</span> <span style="color: #61CE3C;">"Evdev Scrolling Distance"</span> 1 -1 1
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Réactiver le son après une sortie de veille</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>Editer "/etc/default/acpi-support"
</li>

<li>Remplacer : 
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #FF6400;">HIBERNATE_MODE</span>=shutdown
</pre>
</div>

<ul class="org-ul">
<li>Par : 
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #FF6400;">HIBERNATE_MODE</span>=platform
</pre>
</div>

<div class="warning">
<p>
Selon le système d'exploitation, mon ordinateur n'a pas répondu de la même façon. Dans certains cas, cela a entraîné de nombreux bugs avec les raccourcis natifs (FN&#x2026;) : touches son non-reconnues par exemple.
</p>

</div>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> KDE</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-sec-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> Activer la touche Windows pour afficher le launcher</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
Installer "KSuperkey"
</p>
<div class="org-src-container">

<pre class="src src-bash">dnf copr enable vanoudt/KSuperkey 
dnf install ksuperkey
</pre>
</div>
<p>
<a href="https://github.com/hanschen/ksuperkey">Source : Github</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Transformer un .deb en .rpm</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li>Télécharger alien
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">dnf install alien
</pre>
</div>

<ul class="org-ul">
<li>Transformer le <i>.deb</i> en <i>.rpm</i>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">alien -r fichier.deb
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> Mettre flash-player sur Firefox</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>Télécharger le tarball de flash-player sur le site officiel d'Adobe
</li>
<li>Place le fichier <i>libflashplayer.so</i> dans ~/.mozilla/plugins/
</li>
<li>Redémarrer le navigateur
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> Gérer l'audio avec pactl (moins fiable)</h3>
<div class="outline-text-3" id="text-2-7">
<ul class="org-ul">
<li>Avantages
</li>
</ul>
<p>
Facilité de gestion du son (monter, descendre ou muter cartes son), possibilité d'aller au dessus de 100% (!)
</p>

<ul class="org-ul">
<li>Contexte
</li>
</ul>
<p>
Problème pour gérer deux cartes sons distinctes (sortie externe hdmi nvidia et son interne).
</p>

<div class="warning">
<p>
Etant sur XFCE4 et sachant que je dois modifier les raccourcis FN pour le son, il faut supprimer le package <i>xfce4-volumed</i> qui gère les raccourcis et l'animation correspond aux variations de volume.
</p>

</div>

<ul class="org-ul">
<li>Application
</li>
</ul>
<p>
Voici les différentes commandes que j'utilise : 
</p>
<div class="org-src-container">

<pre class="src src-bash"># Pour la sortie hdmi
pactl set-sink-mute alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1 toggle #Mute si le son est activé et unmute s'il est déjà mute
pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1 +10% # Augmente le son de 10% (au-delà de 100%, c'est possible !)
pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1 -10% # Diminue le son de 10%

# Pour la sortie interne
pactl set-sink-mute alsa_output.pci-0000_00_1b.0.analog-stereo toggle
pactl set-sink-volume alsa_output.pci-0000_00_1b.0.analog-stereo +10%
pactl set-sink-volume alsa_output.pci-0000_00_1b.0.analog-stereo -10%
</pre>
</div>

<div class="note">
<p>
Note : il est possible d'optimiser le nom (très long) des sorties à l'aide du fichier de configuration utilisateur.
</p>

</div>
</div>
</div>
<div id="outline-container-sec-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> Gérer l'audio avec amixer (plus fiable)</h3>
<div class="outline-text-3" id="text-2-8">
<p>
pactl est pratique (le son peut aller au-delà de 100%), mais avec mes problèmes audio, il est devenu instable (changement imprévisibles des noms des sorties)
Amixer est dans ce sens plus intelligent, et simple au niveau des commandes :
</p>

<p>
Les différentes commandes que j'utilise :
</p>
<pre class="example">
# -q --&gt; quiet
amixer -q sset Master 80%         # Mets le son à 80%
amixer -q sset unmute Master 10%+ # Augmente le son de 10%
amixer -q sset unmute Master 10%- # Diminue le son de 10
amixer -q sset Master toggle      # Mute/Unmute Master selon l'état
</pre>

<p>
Toujours le même avertissement :
</p>
<div class="warning">
<p>
Etant sur XFCE4 et sachant que je dois modifier les raccourcis FN pour le son, il faut supprimer le package <i>xfce4-volumed</i> qui 
gère les raccourcis et l'animation correspond aux variations de volume.
</p>

</div>
</div>
</div>
<div id="outline-container-sec-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> Activer le pavé numérique au démarrage de LightDM</h3>
<div class="outline-text-3" id="text-2-9">
<ul class="org-ul">
<li>Installer <i>numlockx</i>
</li>
<li>Modifier le fichier <b>/etc/lightdm/lightdm.conf</b>
</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">[Seat:*]
greeter-setup-script=/usr/bin/numlockx on
</pre>
</div>

<p>
<a href="https://wiki.archlinux.org/index.php/LightDM#NumLock_on_by_default">Source : Archlinux</a>
</p>
</div>
</div>
<div id="outline-container-sec-2-10" class="outline-3">
<h3 id="sec-2-10"><span class="section-number-3">2.10</span> Gestion de la luminosité : xbacklight</h3>
<div class="outline-text-3" id="text-2-10">
<p>
Plus facile que de modifier en brute dans <i>proc, /xbacklight</i> gère très bien la gestion de la luminosité : 
</p>

<p>
Augmenter et baisser la luminosité : 
</p>
<div class="org-src-container">

<pre class="src src-bash">xbacklight -inc|-dec 10%
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-11" class="outline-3">
<h3 id="sec-2-11"><span class="section-number-3">2.11</span> NVIDIA</h3>
<div class="outline-text-3" id="text-2-11">
</div><div id="outline-container-sec-2-11-1" class="outline-4">
<h4 id="sec-2-11-1"><span class="section-number-4">2.11.1</span> Configuration basique</h4>
<div class="outline-text-4" id="text-2-11-1">
<p>
Pour empêcher NVIDIA d'afficher un splashscreen au démarrage : éditer <b>/etc/X11/xorg.conf</b>
</p>

<ul class="org-ul">
<li>Localiser la section "Device" de NVIDIA, elle ressemble probablement à ça :
</li>
</ul>

<pre class="example">
Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
EndSection
</pre>

<ul class="org-ul">
<li>Ajouter la ligne suivante pour désactiver le splash screen :
</li>
</ul>

<pre class="example">
Option  "NoLogo" "True"
</pre>

<div class="hint">
<p>
Pour générer <b>xorg.conf</b> avec nvidia installé :
</p>

<div class="org-src-container">

<pre class="src src-bash">nvidia-xconfig
</pre>
</div>

</div>
</div>
</div>

<div id="outline-container-sec-2-11-2" class="outline-4">
<h4 id="sec-2-11-2"><span class="section-number-4">2.11.2</span> Problème de tearing</h4>
<div class="outline-text-4" id="text-2-11-2">
<p>
Ouvrir <b>/etc/X11/xorg.conf</b>
</p>

<p>
Rechercher la section <b>Screen</b> et ajouter
</p>
<pre class="example">
Option  "metamodes" "nvidia-auto-select +0+0 { ForceCompositionPipeline = On }"
</pre>

<p>
Cela peut donner : 
</p>
<pre class="example">
Section "Screen"
    Identifier     "Screen0"
    Device         "Device0"
    Monitor        "Monitor0"
    DefaultDepth    24
    Option  "metamodes" "nvidia-auto-select +0+0 { ForceCompositionPipeline = On }"
    SubSection     "Display"
        Depth       24
    EndSubSection
EndSection
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-2-12" class="outline-3">
<h3 id="sec-2-12"><span class="section-number-3">2.12</span> Accèder aux documents d'un téléphone utilisant MTP</h3>
<div class="outline-text-3" id="text-2-12">
<p>
Le MTP rend l'accès aux téléphones android difficile en dehors de Mac OSX et de Windows, il faut donc utiliser <i>gMPT</i> sur Linux.
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge -av gmtp
</pre>
</div>

<div class="note">
<p>
gMPT possède une interface GUI.
</p>

</div>
</div>
</div>
<div id="outline-container-sec-2-13" class="outline-3">
<h3 id="sec-2-13"><span class="section-number-3">2.13</span> Rediriger sa sortie audio vers un serveur DLNA</h3>
<div class="outline-text-3" id="text-2-13">
<p>
<i>pulseaudio-dlna</i> est un packet qui permet d'ajouter à pulseaudio les différents 
serveurs DLNA de votre réseau à vos sorties audio.
Il n'y a plus qu'à le lancer en arrière-plan pour que tout fonctionne.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Technique</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Bash</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1"><span class="section-number-4">3.1.1</span> Liens utiles</h4>
<div class="outline-text-4" id="text-3-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Liens</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="http://mywiki.wooledge.org/BashFAQ">FAQ Bash</a></td>
</tr>

<tr>
<td class="left"><a href="http://mywiki.wooledge.org/BashGuide">Guide Bash</a></td>
</tr>

<tr>
<td class="left"><a href="https://www.gnu.org/software/bash/manual/">Manuel GNU Bash</a></td>
</tr>

<tr>
<td class="left"><a href="http://wiki.bash-hackers.org/">bash-hackers wiki</a></td>
</tr>

<tr>
<td class="left"><a href="http://git.savannah.gnu.org/cgit/bash.git/log/?h=devel">Forge git bash</a></td>
</tr>

<tr>
<td class="left"><a href="https://lists.gnu.org/mailman/listinfo/help-bash">GNU bash help</a></td>
</tr>

<tr>
<td class="left"><a href="https://github.com/koalaman/shellcheck">ShellCheck (cf. flycheck sur Emacs)</a></td>
</tr>

<tr>
<td class="left"><a href="https://taskwarrior.org/">Taskwarrior</a></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2"><span class="section-number-4">3.1.2</span> Commandes utiles</h4>
<div class="outline-text-4" id="text-3-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Commande</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="http://wiki.bash-hackers.org/howto/getopts_tutorial">getopts (gestion arguments)</a></td>
<td class="left">Gestion intelligente d'arguments dans une commande</td>
</tr>

<tr>
<td class="left">ldd</td>
<td class="left">Permet de récupérer les dépendances d'un binaire</td>
</tr>

<tr>
<td class="left">diff (eg. diff &lt;(cmd1) &lt;(cmd2)</td>
<td class="left">Permet de comparer des fichiers/elements entre eux</td>
</tr>

<tr>
<td class="left">watch</td>
<td class="left">Permet de répéter une commande toutes les N secondes</td>
</tr>

<tr>
<td class="left">mkdir -p</td>
<td class="left">Créer les sous-dossiers récursivement si inexistants</td>
</tr>

<tr>
<td class="left">strace</td>
<td class="left">Indique quels sont les fichiers qu'un programme essaie de lire</td>
</tr>

<tr>
<td class="left"><a href="https://github.com/nvbn/thefuck">thefuck</a></td>
<td class="left">Tente de corriger la dernière commande en se basant sur l'historique</td>
</tr>

<tr>
<td class="left">mtr</td>
<td class="left">Outil de diagnostique réseau (permet de visualiser le cheminement d'un paquet)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-sec-3-1-3" class="outline-4">
<h4 id="sec-3-1-3"><span class="section-number-4">3.1.3</span> Convertir une variable en base X</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
Exemple avec une conversion en base 10
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #FF6400;">newvar</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #93a8c6;">(</span>10#$<span style="color: #FF6400;">var</span><span style="color: #93a8c6;">)</span><span style="color: #8c8c8c;">)</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3-1-4" class="outline-4">
<h4 id="sec-3-1-4"><span class="section-number-4">3.1.4</span> Correction intelligente de script</h4>
<div class="outline-text-4" id="text-3-1-4">
<ul class="org-ul">
<li>Installer <a href="https://github.com/koalaman/shellcheck">ShellCheck</a> 
</li>
<li>Passer le script en argument pour en avoir l'analyse :
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">shellcheck monscript
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Applications</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Skype - désactiver le lancement au démarrage</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-sh">rm -f /etc/prelink.conf.d/skype.conf
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> Tmux</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Commande pour rejoindre la session "home" ou la créer si elle n'existe pas
</p>
<pre class="example">
tmux new -A -s home
</pre>
</div>
</div>
<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> Terminal</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1"><span class="section-number-4">4.3.1</span> [Préférence] Changer la police de caractère du terminal</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
Utiliser <code>Meslo LG M DZ for Powerline</code> taille <code>9.0</code>
</p>

<p>
<a href="https://github.com/andreberg/Meslo-Font">Polices disponibles sur Github</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> Emacs</h3>
<div class="outline-text-3" id="text-4-4">
</div><div id="outline-container-sec-4-4-1" class="outline-4">
<h4 id="sec-4-4-1"><span class="section-number-4">4.4.1</span> Problème de police avec Emacs</h4>
<div class="outline-text-4" id="text-4-4-1">
<p>
cf. Gentoo/Emacs et polices de caractères
</p>
</div>
</div>
<div id="outline-container-sec-4-4-2" class="outline-4">
<h4 id="sec-4-4-2"><span class="section-number-4">4.4.2</span> Avoir la météo</h4>
<div class="outline-text-4" id="text-4-4-2">
<p>
Package : <i>wttrin</i>
</p>

<p>
<a href="https://github.com/bcbcarl/emacs-wttrin">Source : Github</a>
</p>
</div>
</div>
<div id="outline-container-sec-4-4-3" class="outline-4">
<h4 id="sec-4-4-3"><span class="section-number-4">4.4.3</span> Exporter en html avec coloration syntaxique des <i>src</i></h4>
<div class="outline-text-4" id="text-4-4-3">
<p>
Package : <i>htmlize</i>
</p>

<p>
<a href="https://github.com/emacsmirror/htmlize">Source : Github</a>
</p>
</div>
</div>
<div id="outline-container-sec-4-4-4" class="outline-4">
<h4 id="sec-4-4-4"><span class="section-number-4">4.4.4</span> org-mode</h4>
<div class="outline-text-4" id="text-4-4-4">
</div><ol class="org-ol"><li><a id="sec-4-4-4-1" name="sec-4-4-4-1"></a>Indentation automatique<br  /><div class="outline-text-5" id="text-4-4-4-1">
<ul class="org-ul">
<li>Activer <i>org-indent-mode</i>
</li>
<li>Pour la rendre automatique
</li>
</ul>
<div class="org-src-container">

<pre class="src src-elisp"><span style="color: #8c8c8c;">(</span><span style="color: #FBDE2D;">setq</span> org-startup-indented t<span style="color: #8c8c8c;">)</span>
</pre>
</div>
</div>
</li></ol>
</div>
<div id="outline-container-sec-4-4-5" class="outline-4">
<h4 id="sec-4-4-5"><span class="section-number-4">4.4.5</span> Correction automatique scripts shell avec ShellCheck</h4>
<div class="outline-text-4" id="text-4-4-5">
<p>
Activer flycheck : <i>flycheck-mode</i>, la correction se fait ensuite automatiquement avec <i>ShellCheck</i>.
</p>
</div>
</div>
<div id="outline-container-sec-4-4-6" class="outline-4">
<h4 id="sec-4-4-6"><span class="section-number-4">4.4.6</span> Faire des présentations avec org-mode et Reveal.js</h4>
<div class="outline-text-4" id="text-4-4-6">
<p>
Permet de faire des présentations avec Reveal.js en utilisant org-mode
</p>
</div>
<ol class="org-ol"><li><a id="sec-4-4-6-1" name="sec-4-4-6-1"></a>Liens importants<br  /><div class="outline-text-5" id="text-4-4-6-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Lien</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><a href="https://github.com/hakimel/reveal.js/">reveal.js - Github</a></td>
<td class="left">Repos Github du framework javascript</td>
</tr>

<tr>
<td class="left"><a href="https://github.com/yjwen/org-reveal/">org-reveal - Github</a></td>
<td class="left">Repos Github du package org-mode pour gérer reveal.js</td>
</tr>

<tr>
<td class="left"><a href="https://github.com/hakimel/reveal.js/wiki/Keyboard-Shortcuts">Raccourcis clavier</a></td>
<td class="left">Raccourcis clavier disponibles en présentation</td>
</tr>

<tr>
<td class="left"><a href="http://nwidger.github.io/blog/post/making-a-reveal.js-presentation-with-org-reveal/">Exemple de présentation</a></td>
<td class="left">Exemple/Tutoriel de l'utilisation de org-reveal</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="sec-4-4-6-2" name="sec-4-4-6-2"></a>Instructions<br  /><div class="outline-text-5" id="text-4-4-6-2">
<ul class="org-ul">
<li>Télécharger reveal.js l'extraire et le renommer <i>reveal.js</i> (sinon préciser son emplacement avec <b>#+REVEAL_ROOT: <a href="file:///d:/reveal.js">file:///d:/reveal.js</a></b>)
</li>
<li>Installer le package <i>ox-reveal.el</i> (et <i>htmlize.el</i> pour la coloration syntaxique) sur Emacs
</li>
<li>Créer un fichier <i>.org</i>
</li>
<li>Si la librarie n'est pas chargée, faire <b>M-x load-library</b> et entrer <b>ox-reveal</b>

<div class="note">
<p>
Pour exporter en html : <b>C-c C-e R R</b>
</p>

</div>
</li>
</ul>
</div>
</li>
<li><a id="sec-4-4-6-3" name="sec-4-4-6-3"></a>Notes<br  /><div class="outline-text-5" id="text-4-4-6-3">
<ul class="org-ul">
<li>Pour fragmenter l'apparition d'une liste (placer au dessus de la liste) : <b>#+ATTR_REVEAL: :frag (appear)</b>
</li>
<li>Pour enlever le sommaire, la datation et la numérotation <b>#+OPTIONS: toc:nil timestamp:nil num:nil</b>
</li>
<li>Pour afficher des notes pour le présentateur : <b>#+BEGIN_NOTES blabla #+END_NOTES</b>
</li>
<li>Paramétrer les effets de slide : <b>#+REVEAL_TRANS: slide</b>
</li>
</ul>
</div>
</li>
<li><a id="sec-4-4-6-4" name="sec-4-4-6-4"></a>Raccourcis<br  /><div class="outline-text-5" id="text-4-4-6-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Touche</th>
<th scope="col" class="left">Raccourci</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><b>Haut/Bas/Gauche/Droite</b></td>
<td class="left">Changer de slide</td>
</tr>

<tr>
<td class="left"><b>f</b></td>
<td class="left">Plein écran</td>
</tr>

<tr>
<td class="left"><b>s</b></td>
<td class="left">Affichage pour le présentateur</td>
</tr>

<tr>
<td class="left"><b>o</b></td>
<td class="left">Aperçu des slides</td>
</tr>

<tr>
<td class="left"><b>.</b> ou <b>b</b></td>
<td class="left">Rend l'écran noir</td>
</tr>
</tbody>
</table>
</div>
</li></ol>
</div>
</div>
<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> mkvmerge</h3>
<div class="outline-text-3" id="text-4-5">
<p>
Pour intégrer des sous-titres (.str) avec mkvmerge
</p>

<ul class="org-ul">
<li>Télécharger mkvtoolnix pour avoir mkvmerge
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">emerge -av media-video/mkvtoolnix
</pre>
</div>

<ul class="org-ul">
<li>Commande :
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">mkvmerge -o &lt;sortie&gt; --language 0:&lt;langue&gt; &lt;sous-titre&gt; &lt;entree&gt;
</pre>
</div>

<ul class="org-ul">
<li>Exemple :
</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">mkvmerge -o <span style="color: #61CE3C;">"Les Sept Samura&#239;s (avec sous-titre).mp4"</span> --language 0:ja <span style="color: #61CE3C;">"french.srt"</span> <span style="color: #61CE3C;">"Les Sept Samura&#239;s (sans sous-titre).mp4"</span>
</pre>
</div>

<div class="hint">
<p>
Pour obtenir la liste des langues et leur code associé : 
</p>

<div class="org-src-container">

<pre class="src src-sh">mkvmerge --list-languages
</pre>
</div>

</div>
</div>
</div>
<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> cmus-notify</h3>
<div class="outline-text-3" id="text-4-6">
<p>
Permet de gérer le client cmus
</p>
</div>
<div id="outline-container-sec-4-6-1" class="outline-4">
<h4 id="sec-4-6-1"><span class="section-number-4">4.6.1</span> Script</h4>
<div class="outline-text-4" id="text-4-6-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #AEAEAE; font-style: italic;">#</span><span style="color: #AEAEAE; font-style: italic;">!/bin/</span><span style="color: #FBDE2D;">sh</span>
<span style="color: #FF6400;">Cmus_remote</span>=$<span style="color: #8c8c8c;">(</span>cmus-remote -Q<span style="color: #8c8c8c;">)</span>
<span style="color: #FF6400;">Instance</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #94bff3;">echo</span> -e <span style="color: #61CE3C;">"$Cmus_remote"</span> | wc -l<span style="color: #8c8c8c;">)</span>
<span style="color: #FF6400;">Shuffle</span>=<span style="color: #61CE3C;">"Shuffle On"</span>
<span style="color: #FBDE2D;">if</span> <span style="color: #8c8c8c;">[</span> $<span style="color: #FF6400;">Instance</span> = 1 <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
    terminal -e cmus &amp;&amp;
    sleep 2
    cmus-remote -p
<span style="color: #FBDE2D;">else</span>
    <span style="color: #FBDE2D;">if</span> <span style="color: #8c8c8c;">[</span> $<span style="color: #FF6400;">1</span> == <span style="color: #61CE3C;">"-S"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
        <span style="color: #FBDE2D;">if</span> <span style="color: #8c8c8c;">[</span> <span style="color: #fa8072;">`echo "$Cmus_remote" | grep shuffle | cut -d ' ' -f 3`</span> == true <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
            <span style="color: #FF6400;">Shuffle</span>=<span style="color: #61CE3C;">"Shuffle Off"</span>
        <span style="color: #FBDE2D;">fi</span>
        cmus-remote $<span style="color: #FF6400;">1</span>
        notify-send -t 800 $<span style="color: #FF6400;">Shuffle</span>
    <span style="color: #FBDE2D;">elif</span> <span style="color: #8c8c8c;">[</span> $<span style="color: #FF6400;">1</span> == <span style="color: #61CE3C;">"-Q"</span> <span style="color: #8c8c8c;">]</span>; <span style="color: #FBDE2D;">then</span>
        <span style="color: #FF6400;">Cur_song</span>=$<span style="color: #8c8c8c;">(</span><span style="color: #94bff3;">echo</span> <span style="color: #61CE3C;">"$Cmus_remote"</span> | grep tag | head -n 3 | sort -r | cut -d <span style="color: #61CE3C;">' '</span> -f 3- <span style="color: #8c8c8c;">)</span>
        notify-send -i multimedia-volume-control -t 1800 <span style="color: #61CE3C;">"$Cur_song"</span>
<span style="color: #AEAEAE; font-style: italic;">#        </span><span style="color: #AEAEAE; font-style: italic;">artist=$(echo -e "$Cur_song" | head -n 2 | tail -n 1)</span>
<span style="color: #AEAEAE; font-style: italic;">#        </span><span style="color: #AEAEAE; font-style: italic;">title=$(echo -e "$Cur_song" | head -n 1 )</span>
<span style="color: #AEAEAE; font-style: italic;">#        </span><span style="color: #AEAEAE; font-style: italic;">cmus-updatepidgin artist "$artist" title "$title"</span>
    <span style="color: #FBDE2D;">else</span>
        cmus-remote $<span style="color: #FF6400;">1</span>
        <span style="color: #FF6400;">Cur_song</span>=$<span style="color: #8c8c8c;">(</span>cmus-remote -Q | grep tag | head -n 3 | sort -r | cut -d <span style="color: #61CE3C;">' '</span> -f 3- <span style="color: #8c8c8c;">)</span>
        notify-send -i multimedia-volume-control -t 1800 <span style="color: #61CE3C;">"$Cur_song"</span>
    <span style="color: #FBDE2D;">fi</span>
<span style="color: #FBDE2D;">fi</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4-6-2" class="outline-4">
<h4 id="sec-4-6-2"><span class="section-number-4">4.6.2</span> Fonctionnement</h4>
<div class="outline-text-4" id="text-4-6-2">
<p>
Utiliser le script en spécifiant un argument (cf. '-p') reconnu par cmus-remote
</p>

<p>
Infos sur les arguments :
</p>
<div class="org-src-container">

<pre class="src src-bash">man cmus-remote
</pre>
</div>

<p>
Exemple :
</p>
<pre class="example">
cmus-notify.sh -p #Permet de jouer le morceau sélectionné
</pre>

<p>
<a href="https://colorathis.wordpress.com/2013/06/25/cmus-notify/">Source : colorathis.wordpress.com</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> MPD</h3>
<div class="outline-text-3" id="text-4-7">
<p>
Playeur orienté serveur.
</p>
</div>
<div id="outline-container-sec-4-7-1" class="outline-4">
<h4 id="sec-4-7-1"><span class="section-number-4">4.7.1</span> Configurqation de MPD</h4>
<div class="outline-text-4" id="text-4-7-1">
<p>
Editer : <b>~/.mpd/mpd.conf</b>
</p>
<pre class="example">
music_directory	"repertoire_musical"
db_file "~/.mpd/mpd.db"
log_file "~/.mpd/mpd.log"
pid_file "~/.mpd/mpd.pid"
state_file "~/.mpd/mpdstate"

user "utilisateur"

bind_to_address "127.0.0.1"
port "6600"

audio_output {
        type            "pulse"
        name            "Pulse Output"
        mixer_control   "Master"
}
</pre>
</div>
</div>
<div id="outline-container-sec-4-7-2" class="outline-4">
<h4 id="sec-4-7-2"><span class="section-number-4">4.7.2</span> MPC</h4>
<div class="outline-text-4" id="text-4-7-2">
<p>
MPC permet de gérer MPD en ligne de commande, ex :
</p>
<div class="org-src-container">

<pre class="src src-bash">mpc play/pause/toggle/prev/next/stop
</pre>
</div>
<div class="hint">
<p>
Je map ces différentes commandes sur mes touches multimédia pour pouvoir accèder au démon de MPD à tout moment.
</p>

</div>
</div>
</div>
<div id="outline-container-sec-4-7-3" class="outline-4">
<h4 id="sec-4-7-3"><span class="section-number-4">4.7.3</span> Autres clients</h4>
<div class="outline-text-4" id="text-4-7-3">
<ul class="org-ul">
<li><a href="https://ambientsound.github.io/pms/">Practical Music Search (pms)</a>
</li>
<li><a href="http://rybczak.net/ncmpcpp/">NCurses Music Player Client (Plus Plus) (ncmpcpp)</a>
</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-sec-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> Rofi</h3>
<div class="outline-text-3" id="text-4-8">
<p>
Outil similaire à dmenu
</p>
</div>
<div id="outline-container-sec-4-8-1" class="outline-4">
<h4 id="sec-4-8-1"><span class="section-number-4">4.8.1</span> Commande personnalisée</h4>
<div class="outline-text-4" id="text-4-8-1">
<pre class="example">
rofi -show run -lines 3 -eh 2 -width 100 -padding 430 -opacity "85" -bw 0 -bc "#2f343f" -bg "#2f343f" -fg "#f3f4f5" -hlbg "#2f343f" -hlfg "#9575cd" -font "System San Francisco Displa 18"
</pre>
</div>
</div>
<div id="outline-container-sec-4-8-2" class="outline-4">
<h4 id="sec-4-8-2"><span class="section-number-4">4.8.2</span> Thème</h4>
<div class="outline-text-4" id="text-4-8-2">
<p>
Nom du thème : <b>glue_pro_blue.theme</b>
</p>

<p>
Installer le thème dans le fichier <b>~.Xresources</b>
</p>
<pre class="example">
! ------------------------------------------------------------------------------
! ROFI Color theme
! ------------------------------------------------------------------------------
rofi.color-enabled: true
rofi.color-window: #393939, #393939, #268bd2
rofi.color-normal: #393939, #ffffff, #393939, #268bd2, #ffffff
rofi.color-active: #393939, #268bd2, #393939, #268bd2, #205171
rofi.color-urgent: #393939, #f3843d, #393939, #268bd2, #ffc39c
</pre>
<p>
<a href="https://davedavenport.github.io/rofi">Source : Github</a>
</p>
</div>
</div>
</div>
<div id="outline-container-sec-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> Weechat</h3>
<div class="outline-text-3" id="text-4-9">
<p>
Client IRC en ligne de commande
</p>
</div>
<div id="outline-container-sec-4-9-1" class="outline-4">
<h4 id="sec-4-9-1"><span class="section-number-4">4.9.1</span> Thème</h4>
<div class="outline-text-4" id="text-4-9-1">
<p>
Commandes à exécuter :
</p>
<pre class="example">
/script install buffers.pl buffer_autoclose.py iset.pl go.py colorize_nicks.py
#Permet de changer de buffer avec ALT+g
/key bind meta-g /go

/set weechat.bar.status.color_bg 0
/set weechat.bar.title.color_bg 0
/set weechat.color.chat_nick_colors 1,2,3,4,5,6
/set buffers.color.hotlist_message_fg 7
/set weechat.bar.buffers.position top

/set weechat.bar.buffers.items buffers
/set buffers.look.hide_merged_buffers server
/set buffers.look.detach 600

/set weechat.look.buffer_notify_default message
/set irc.look.smart_filter on
/filter add irc_smart * irc_smart_filter *
/filter add irc_join_names * irc_366,irc_332,irc_333,irc_329,irc_324 *

/set weechat.look.prefix_same_nick "⤷"
/set weechat.look.prefix_error "⚠"
/set weechat.look.prefix_network "ℹ "
/set weechat.look.prefix_action "⚡"
/set weechat.look.bar_more_down "▼▼"
/set weechat.look.bar_more_left "◀◀"
/set weechat.look.bar_more_right "▶▶"
/set weechat.look.bar_more_up "▲▲"
/set weechat.look.prefix_suffix "╡"

#Afficher la nicklist avec ALT+n
/key bind meta-n /bar toggle nicklist
</pre>
<p>
<a href="http://benoliver999.com/2014/02/18/weechatconf/">Tous les crédits vont à benoliver99</a>
</p>
</div>
</div>
<div id="outline-container-sec-4-9-2" class="outline-4">
<h4 id="sec-4-9-2"><span class="section-number-4">4.9.2</span> Autres configurations intéressantes</h4>
<div class="outline-text-4" id="text-4-9-2">
<p>
<a href="https://weechat.org/files/doc/devel/weechat_quickstart.fr.html#irc_server_options">https://weechat.org/files/doc/devel/weechat_quickstart.fr.html#irc_server_options</a>
</p>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: lturpinat</p>
<p class="date">Created: 2016-12-29 Thu 15:43</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.2.10)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
