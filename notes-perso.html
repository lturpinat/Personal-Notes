<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2016-11-01 mar. 19:15 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>Notes Linux</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="lturpinat" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Notes Linux</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline48">1. Gentoo</a>
<ul>
<li><a href="#orgheadline32">1.1. Installation rapide de Gentoo</a>
<ul>
<li><a href="#orgheadline4">1.1.1. Formatage du disque</a></li>
<li><a href="#orgheadline8">1.1.2. Stage3</a></li>
<li><a href="#orgheadline11">1.1.3. Chrooting</a></li>
<li><a href="#orgheadline14">1.1.4. Utilisateurs et <i>make.conf</i></a></li>
<li><a href="#orgheadline15">1.1.5. Portage</a></li>
<li><a href="#orgheadline16">1.1.6. Paramétrage de <i>fstab</i></a></li>
<li><a href="#orgheadline17">1.1.7. Sélection d'un profil</a></li>
<li><a href="#orgheadline18">1.1.8. Fuseau horaire</a></li>
<li><a href="#orgheadline22">1.1.9. Fichiers de configuration</a></li>
<li><a href="#orgheadline26">1.1.10. Le Kernel</a></li>
<li><a href="#orgheadline27">1.1.11. L'amorceur (bootloader)</a></li>
<li><a href="#orgheadline28">1.1.12. Outils réseaux</a></li>
<li><a href="#orgheadline29">1.1.13. Redémarrage</a></li>
<li><a href="#orgheadline30">1.1.14. Dernière phase</a></li>
<li><a href="#orgheadline31">1.1.15. Sources</a></li>
</ul>
</li>
<li><a href="#orgheadline33">1.2. Le clavier</a></li>
<li><a href="#orgheadline34">1.3. Outils vfat (FAT32)</a></li>
<li><a href="#orgheadline37">1.4. Support du NTFS</a>
<ul>
<li><a href="#orgheadline35">1.4.1. Kernel</a></li>
<li><a href="#orgheadline36">1.4.2. Outil</a></li>
</ul>
</li>
<li><a href="#orgheadline38">1.5. Emacs et polices de caractères</a></li>
<li><a href="#orgheadline43">1.6. Support du NFS</a>
<ul>
<li><a href="#orgheadline39">1.6.1. Kernel</a></li>
<li><a href="#orgheadline40">1.6.2. Outil</a></li>
<li><a href="#orgheadline41">1.6.3. OpenRC</a></li>
<li><a href="#orgheadline42">1.6.4. Exemple de montage</a></li>
</ul>
</li>
<li><a href="#orgheadline46">1.7. cmus-notify</a>
<ul>
<li><a href="#orgheadline44">1.7.1. Script</a></li>
<li><a href="#orgheadline45">1.7.2. Fonctionnement</a></li>
</ul>
</li>
<li><a href="#orgheadline47">1.8. OpenVPN</a></li>
</ul>
</li>
<li><a href="#orgheadline57">2. Général</a>
<ul>
<li><a href="#orgheadline49">2.1. Compatibilité R.A.T.3</a></li>
<li><a href="#orgheadline50">2.2. Réactiver le son après une sortie de veille</a></li>
<li><a href="#orgheadline52">2.3. KDE</a>
<ul>
<li><a href="#orgheadline51">2.3.1. Activer la touche Windows pour afficher le launcher</a></li>
</ul>
</li>
<li><a href="#orgheadline53">2.4. Transformer un .deb en .rpm</a></li>
<li><a href="#orgheadline54">2.5. Mettre flash-player sur Firefox</a></li>
<li><a href="#orgheadline55">2.6. Gérer l'audio avec pactl</a></li>
<li><a href="#orgheadline56">2.7. Activer le pavé numérique au démarrage de LightDM</a></li>
</ul>
</li>
<li><a href="#orgheadline63">3. Technique</a>
<ul>
<li><a href="#orgheadline62">3.1. Bash</a>
<ul>
<li><a href="#orgheadline58">3.1.1. Liens utiles</a></li>
<li><a href="#orgheadline59">3.1.2. Commandes utiles</a></li>
<li><a href="#orgheadline60">3.1.3. Convertir une variable en base X</a></li>
<li><a href="#orgheadline61">3.1.4. Correction intelligente de script</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgheadline80">4. Applications</a>
<ul>
<li><a href="#orgheadline64">4.1. Skype - désactiver le lancement au démarrage</a></li>
<li><a href="#orgheadline65">4.2. Tmux</a></li>
<li><a href="#orgheadline67">4.3. Terminal</a>
<ul>
<li><a href="#orgheadline66">4.3.1. [Préférence] Changer la police de caractère du terminal</a></li>
</ul>
</li>
<li><a href="#orgheadline79">4.4. Emacs</a>
<ul>
<li><a href="#orgheadline68">4.4.1. Problème de police avec Emacs</a></li>
<li><a href="#orgheadline69">4.4.2. Avoir la météo</a></li>
<li><a href="#orgheadline70">4.4.3. Exporter en html avec coloration syntaxique des <i>src</i></a></li>
<li><a href="#orgheadline72">4.4.4. org-mode</a></li>
<li><a href="#orgheadline73">4.4.5. Correction automatique scripts shell avec ShellCheck</a></li>
<li><a href="#orgheadline78">4.4.6. Faire des présentations avec org-mode et Reveal.js</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<hr  />


<div class="figure">
<p><img src="./linux.png" alt="linux.png" align="center" />
</p>
</div>

<div class="hint">
<p>
La machine utilisée est un <code>Asus G75VX</code>.
</p>

</div>

<div id="outline-container-orgheadline48" class="outline-2">
<h2 id="orgheadline48"><span class="section-number-2">1</span> Gentoo</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgheadline32" class="outline-3">
<h3 id="orgheadline32"><span class="section-number-3">1.1</span> Installation rapide de Gentoo</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-orgheadline4" class="outline-4">
<h4 id="orgheadline4"><span class="section-number-4">1.1.1</span> Formatage du disque</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
Création de 4 partitions pour une installation GPT/UEFI
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Partition</th>
<th scope="col" class="org-left">Nom supposé sur un disque <i>sda</i></th>
<th scope="col" class="org-left">Point de montage</th>
<th scope="col" class="org-left">Format</th>
<th scope="col" class="org-left">Particularité</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">boot</td>
<td class="org-left">/dev/sda1</td>
<td class="org-left">/boot</td>
<td class="org-left">ext2(4)</td>
<td class="org-left">Partition de boot</td>
</tr>

<tr>
<td class="org-left">UEFI</td>
<td class="org-left">/dev/sda2</td>
<td class="org-left">/boot/efi</td>
<td class="org-left">vfat (FAT32)</td>
<td class="org-left">Partition de boot de l'UEFI</td>
</tr>

<tr>
<td class="org-left">swap</td>
<td class="org-left">/dev/sda3</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">swap</td>
<td class="org-left">Partition de swap</td>
</tr>

<tr>
<td class="org-left">rootfs</td>
<td class="org-left">/dev/sda4</td>
<td class="org-left">/</td>
<td class="org-left">ext4</td>
<td class="org-left">Partition principale</td>
</tr>
</tbody>
</table>
</div>
<ol class="org-ol"><li><a id="orgheadline1"></a>Création des partitions <i>gdisk</i><br  /><div class="outline-text-5" id="text-1-1-1-1">
<pre class="example">
root #gdisk /dev/sda

Create GPT partition table:
Command: o ↵
This option deletes all partitions and creates a new protective MBR.
Proceed? (Y/N): y ↵

Create Partition 1 (/boot):
Command: n ↵
Partition Number: 1 ↵
First sector: ↵
Last sector: +128M ↵
Hex Code: ↵

Create Partition 2 (UEFI ESP):
Command: n ↵
Partition Number: 2 ↵
First sector: ↵
Last sector: +32M ↵
Hex Code: EF00 ↵

Create Partition 3 (swap):
Command: n ↵
Partition Number: 3 ↵
First sector: ↵
Last sector: +1024MB ↵
Hex Code: 8200 ↵

Create Partition 4 (/):
Command: n ↵
Partition Number: 4 ↵
First sector: ↵
Last sector: ↵ (for rest of disk)
Hex Code: ↵

Write Partition Table To Disk:
Command: w ↵
Do you want to proceed? (Y/N): Y ↵
</pre>
</div></li>
<li><a id="orgheadline2"></a>Formatage des partitions<br  /><div class="outline-text-5" id="text-1-1-1-2">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Formatage de boot et rootfs en ext4</span>
mkfs.ext4 /dev/sda1
mkfs.ext4 /dev/sda4
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Formatage et activation de la partition swap</span>
mkswap /dev/sda3 &amp;&amp; swapon /dev/sda3
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Formatage de UEFI en vfat</span>
mkfs.vfat /dev/sda2
</pre>
</div>
</div></li>
<li><a id="orgheadline3"></a>Montage des partitions<br  /><div class="outline-text-5" id="text-1-1-1-3">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Montage de rootfs dans /mnt/gentoo</span>
mkdir -p /mnt/gentoo
mount /dev/sda4 /mnt/gentoo
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Montage de boot dans /mnt/gentoo/boot</span>
mkdir /mnt/gentoo/boot
mount /dev/sda1 /mnt/gentoo/boot
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Montage de UEFI dans /mnt/gentoo/boot/efi</span>
mkdir /mnt/gentoo/boot/efi
mount /dev/sda2 /mnt/gentoo/boot/efi
</pre>
</div>
</div></li></ol>
</div>
<div id="outline-container-orgheadline8" class="outline-4">
<h4 id="orgheadline8"><span class="section-number-4">1.1.2</span> Stage3</h4>
<div class="outline-text-4" id="text-1-1-2">
</div><ol class="org-ol"><li><a id="orgheadline5"></a>Précaution : la date<br  /><div class="outline-text-5" id="text-1-1-2-1">
<p>
Afin d'éviter tout problème de date pour la suite de l'installation, la définir :
</p>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Format : mois - jour - heure - minutes - ann&#233;e</span>
date MMJJhhmmAAAAA
</pre>
</div>
</div></li>
<li><a id="orgheadline6"></a>Téléchargement du tarball<br  /><div class="outline-text-5" id="text-1-1-2-2">
<ul class="org-ul">
<li>Trouver le repos adapaté sur le site, depuis la console grâce à links (navigateur web console) :</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #4f97d7;">cd</span> /mnt/gentoo
links https://www.gentoo.org/downloads/mirrors
</pre>
</div>
<ul class="org-ul">
<li>Arriver sur un lien du style "<a href="http://gentoo.mirrors.ovh.net/gentoo-distfiles/releases/amd64/autobuilds/current-stage3-amd64/stage3-amd64-20161027.tar.bz2">http://gentoo.mirrors.ovh.net/gentoo-distfiles/releases/amd64/autobuilds/current-stage3-amd64/stage3-amd64-20161027.tar.bz2</a>"</li>
<li>Lancer le téléchargement grâce au raccourci <i>CTRL+D</i></li>
</ul>
</div></li>
<li><a id="orgheadline7"></a>Décompression du tarball<br  /><div class="outline-text-5" id="text-1-1-2-3">
<div class="org-src-container">

<pre class="src src-bash">tar xjpf stage3*
</pre>
</div>
</div></li></ol>
</div>
<div id="outline-container-orgheadline11" class="outline-4">
<h4 id="orgheadline11"><span class="section-number-4">1.1.3</span> Chrooting</h4>
<div class="outline-text-4" id="text-1-1-3">
</div><ol class="org-ol"><li><a id="orgheadline9"></a>"Liaison" de /sys et /dev avec le nouveau système<br  /><div class="outline-text-5" id="text-1-1-3-1">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #4f97d7;">cd</span> /
mount -t proc proc /mnt/gentoo/proc
mount --rbind /sys /mnt/gentoo/sys
mount --make-rslave /mnt/gentoo/sys
mount --rbind /dev /mnt/gentoo/dev
mount --make-rslave /mnt/gentoo/dev
</pre>
</div>

<div class="note">
<p>
Selon le Handbook, les commandes contenant "&#x2013;make-rslave" importent si le choix du système d'initilisation se porte sur systemd (si l'on ne souhaite pas prendre OpenRC).
</p>

</div>
</div></li>
<li><a id="orgheadline10"></a>Transfert<br  /><div class="outline-text-5" id="text-1-1-3-2">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Transfert du fichier sp&#233;cifiant le ou les serveurs DNS &#224; utiliser pour r&#233;soudre un nom de domaine</span>
cp /etc/resolv.conf /mnt/gentoo/etc
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Chrooting</span>
chroot /mnt/gentoo /bin/bash
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Rechargement de la nouvelle configuration</span>
<span style="color: #4f97d7;">source</span> /etc/profile
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Petit indicateur pour se souvenir que l'on a chroot&#233;</span>
<span style="color: #4f97d7;">export</span> <span style="color: #7590db;">PS1</span>=<span style="color: #2d9574;">"(chroot) $PS1"</span>
</pre>
</div>
</div></li></ol>
</div>
<div id="outline-container-orgheadline14" class="outline-4">
<h4 id="orgheadline14"><span class="section-number-4">1.1.4</span> Utilisateurs et <i>make.conf</i></h4>
<div class="outline-text-4" id="text-1-1-4">
</div><ol class="org-ol"><li><a id="orgheadline12"></a>Utilisateurs<br  /><div class="outline-text-5" id="text-1-1-4-1">
<ul class="org-ul">
<li>Modification du mot de passe <i>root</i></li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">passwd
</pre>
</div>
<ul class="org-ul">
<li>Ajout d'un utilisateur</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Ajout de l'utilisateur</span>
useradd -g users -G wheel,portage,audio,video,usb,cdrom -m &lt;nom-utilisateur&gt;
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Modification du mot de passe</span>
passwd &lt;nom-utilisateur&gt;
</pre>
</div>
</div></li>
<li><a id="orgheadline13"></a>Configuration de <i>make.conf</i><br  /><div class="outline-text-5" id="text-1-1-4-2">
<p>
Modifications à effectuer dans le fichier :
</p>
<pre class="example">
CFLAGS="-march=native -02 -pipe"
MAKEOPTS="-j5"			#Permet la compilation parallèle ; remplacer "5" par le nombre de coeurs plus 1 est conseillé
USE="python icu bindist mmx sse sse2"	 #Quelques USE flags basiques à ajouter
VIDEO_CARDS=" "			#Il est préférable de ne spécifier votre carte graphique qu'une fois que votre système de base fonctionne (ex: nvidia)
</pre>
</div></li></ol>
</div>
<div id="outline-container-orgheadline15" class="outline-4">
<h4 id="orgheadline15"><span class="section-number-4">1.1.5</span> Portage</h4>
<div class="outline-text-4" id="text-1-1-5">
<p>
Synchronisation initiale de portage :
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge-webrsync
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline16" class="outline-4">
<h4 id="orgheadline16"><span class="section-number-4">1.1.6</span> Paramétrage de <i>fstab</i></h4>
<div class="outline-text-4" id="text-1-1-6">
<p>
Editer <b>/etc/fstab</b> en accord avec les partitions générées plus haut :
</p>
<pre class="example">
/dev/sda1   /boot       ext4(ou ext2, selon)    noauto,noatime 1 2
/dev/sda4   /           ext4                    noatime        0 1
/dev/sda3   none        swap                    sw             0 0
</pre>

<div class="hint">
<p>
Normalement, la partition UEFI est automatique gérée (ie. détectée), il n'est donc pas nécessaire de l'ajouter à <i>fstab</i>.
</p>

</div>
</div>
</div>
<div id="outline-container-orgheadline17" class="outline-4">
<h4 id="orgheadline17"><span class="section-number-4">1.1.7</span> Sélection d'un profil</h4>
<div class="outline-text-4" id="text-1-1-7">
<p>
Sélectionner le profile convenant à votre future machine :
</p>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Afficher les diff&#233;rents profiles disponibles</span>
eselect profile list 
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">S&#233;lectioner le profile d&#233;sir&#233;</span>
eselect profile set &lt;id-profile&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline18" class="outline-4">
<h4 id="orgheadline18"><span class="section-number-4">1.1.8</span> Fuseau horaire</h4>
<div class="outline-text-4" id="text-1-1-8">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">R&#233;cup&#233;rer la localisation du fuseau horaire d&#233;sir&#233;</span>
ls /usr/share/zoneinfo
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Le sauvegarder dans /etc/timezone ; ici exemple avec Paris</span>
<span style="color: #4f97d7;">echo</span> <span style="color: #2d9574;">"Europe/Paris"</span> &gt; /etc/timezone
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Installation des configurations du fuseau</span>
emerge --config sys-libs/timezone-data
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Editer le fichier et "d&#233;commenter" les locales requises</span>
nano /etc/locale.gen
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">G&#233;n&#233;rer les locales</span>
locale-gen
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Selectionner la locale principale</span>
eselect locale list
eselect locale set &lt;locale-id&gt;
</pre>
</div>

<div class="note">
<p>
Personnellement je rajoute (toujours avec l'exemple de Paris) pour être sûr : 
</p>
<div class="org-src-container">

<pre class="src src-bash">ln -sf /usr/share/zoneinfo/Europe/Paris /etc/localtime
</pre>
</div>

</div>

<div class="note">
<p>
Il y a également moyen de préciser la variable LC_COLLATE (intéressant pour les globs) : 
</p>

<p>
Editer */etc/env.d/02locale
</p>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #7590db;">LC_COLLATE</span>=<span style="color: #2d9574;">"C"</span>
</pre>
</div>

</div>

<p>
Recharger la nouvelle configuration :
</p>
<div class="org-src-container">

<pre class="src src-bash">env-update &amp;&amp; <span style="color: #4f97d7;">source</span> /etc/profile &amp;&amp; <span style="color: #4f97d7;">export</span> <span style="color: #7590db;">PS1</span>=<span style="color: #2d9574;">"(chroot) $PS1"</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline22" class="outline-4">
<h4 id="orgheadline22"><span class="section-number-4">1.1.9</span> Fichiers de configuration</h4>
<div class="outline-text-4" id="text-1-1-9">
</div><ol class="org-ol"><li><a id="orgheadline19"></a>Le nom d'hôte (hostname)<br  /><div class="outline-text-5" id="text-1-1-9-1">
<p>
Editer <b>/etc/conf.d/hostname</b>
</p>
</div></li>
<li><a id="orgheadline20"></a>L'agencement des touches (keymap)<br  /><div class="outline-text-5" id="text-1-1-9-2">
<p>
Editer <b>/etc/conf.d/keymaps</b>
</p>
</div></li>
<li><a id="orgheadline21"></a>L'heure<br  /><div class="outline-text-5" id="text-1-1-9-3">
<p>
À modifier, surtout dans le cas d'une cohabitation avec Windows (cf. commentaires du fichier)
Editer <b>/etc/conf.d/hwclock</b>
</p>
</div></li></ol>
</div>
<div id="outline-container-orgheadline26" class="outline-4">
<h4 id="orgheadline26"><span class="section-number-4">1.1.10</span> Le Kernel</h4>
<div class="outline-text-4" id="text-1-1-10">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Installation du kernel vanilla de Gentoo</span>
emerge -av sys-kernel/gentoo-sources sys-kernel/linux-firmware
</pre>
</div>
</div>
<ol class="org-ol"><li><a id="orgheadline23"></a>Configuration automatique<br  /><div class="outline-text-5" id="text-1-1-10-1">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Garde les modules charg&#233;s par la LiveCD</span>
make localyesconfig
make -j2
</pre>
</div>
</div></li>
<li><a id="orgheadline24"></a>Configuration manuelle<br  /><div class="outline-text-5" id="text-1-1-10-2">
<p>
<b>Soon&#x2026;</b>
</p>
</div></li>
<li><a id="orgheadline25"></a>Installation<br  /><div class="outline-text-5" id="text-1-1-10-3">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Installation des modules</span>
make modules_install
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Installation du kernel</span>
make install
</pre>
</div>
</div></li></ol>
</div>
<div id="outline-container-orgheadline27" class="outline-4">
<h4 id="orgheadline27"><span class="section-number-4">1.1.11</span> L'amorceur (bootloader)</h4>
<div class="outline-text-4" id="text-1-1-11">
<ul class="org-ul">
<li>Comme l'installation se fait en UEFI, il faut le préciser dans le fichier <b>/etc/portage/make.conf</b> :</li>
</ul>
<pre class="example">
GRUB_PLATFORMS="efi-64"
</pre>

<ul class="org-ul">
<li>Installation et configuration de GRUB2</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Installation de GRUB2</span>
emerge -av sys-boot/grub
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Installation de grub en uefi sur le disque</span>
grub-install --target=x86_64-efi /dev/sda
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">G&#233;n&#233;ration du fichier de configuration (contenant les partitions sur lesquelles booter)</span>
grub-mkconfig -o /boot/grub/grub.cfg
</pre>
</div>

<div class="hint">
<p>
Si GRUB n'apparaît pas au redémarrage, il suffit : 
</p>
<ul class="org-ul">
<li>De relancer la LiveCD</li>
<li>De monter les partitions rootfs, boot et UEFI</li>
<li>De chrooter dans rootfs</li>
<li>De retapper les deux dernières commandes de "Installation et configuration de GRUB2"</li>
</ul>

</div>
</div>
</div>

<div id="outline-container-orgheadline28" class="outline-4">
<h4 id="orgheadline28"><span class="section-number-4">1.1.12</span> Outils réseaux</h4>
<div class="outline-text-4" id="text-1-1-12">
<p>
Afin de pouvoir avoir accès à internet au redémarrage, il est nécessaire d'installer différents outils réseaux :
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge --ask sys-apps/iproute2 net-misc/dhcpcd net-wireless/wireless-tools net-wireless/iw net-wireless/wpa_supplicant
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline29" class="outline-4">
<h4 id="orgheadline29"><span class="section-number-4">1.1.13</span> Redémarrage</h4>
<div class="outline-text-4" id="text-1-1-13">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Quitter le chroot (le petit indicateur "(chroot)" devrait dispara&#238;tre</span>
<span style="color: #4f97d7; font-weight: bold;">exit</span>
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">D&#233;monter les partitions proprement</span>
<span style="color: #4f97d7;">cd</span> /mnt
umount -R gentoo
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Red&#233;marrer</span>
reboot
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline30" class="outline-4">
<h4 id="orgheadline30"><span class="section-number-4">1.1.14</span> Dernière phase</h4>
<div class="outline-text-4" id="text-1-1-14">
<p>
Pour terminer l'installation, il faut installer et mettre à jour tous les packages de votre profil qui vous permettront d'avoir un système fonctionnel. Pour cela, connectez vous en root :
</p>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Supprimer le tarball du stage3, d&#233;sormais inutile</span>
<span style="color: #4f97d7;">cd</span> /
rm -f stage3*
<span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Lancer la mise &#224; jour compl&#233;te du syst&#232;me</span>
emerge -uvDNa world
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline31" class="outline-4">
<h4 id="orgheadline31"><span class="section-number-4">1.1.15</span> Sources</h4>
<div class="outline-text-4" id="text-1-1-15">
<p>
Certains passages sont directement tirés de ces différentes sources :
</p>
<ul class="org-ul">
<li><a href="https://wiki.gentoo.org/wiki/Handbook:AMD64">Le Handbook pour AMD64 de gentoo wiki</a></li>
<li><a href="https://wiki.gentoo.org/wiki/Quick_Installation_Checklist">La "Quick Installation Checklist" de gentoo wiki</a></li>
<li><a href="https://www.youtube.com/watch?v=37bmALK7_ag">Le guide écrit associé à la vidéo YouTube e Humaniac</a></li>
<li>Ma propre expérience</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline33" class="outline-3">
<h3 id="orgheadline33"><span class="section-number-3">1.2</span> Le clavier</h3>
<div class="outline-text-3" id="text-1-2">
<p>
Permettre au système de gérer la bonne disposition du clavier
</p>
<ul class="org-ul">
<li><p>
Récupérer les informations sur le clavier :
</p>
<div class="org-src-container">

<pre class="src src-bash">setxkbmap -print -verbose <span style="color: #a45bad;">10</span>
</pre>
</div></li>

<li><p>
Créer un fichier de configuration en conséquence :
<code>/etc/X11/xorg.conf.d/00-keyboard.conf</code>
</p>
<div class="org-src-container">

<pre class="src src-bash">Section <span style="color: #2d9574;">"InputClass"</span>
     Identifier <span style="color: #2d9574;">"system-keyboard"</span>
     MatchIsKeyboard <span style="color: #2d9574;">"on"</span>
     Option <span style="color: #2d9574;">"XkbLayout"</span> <span style="color: #2d9574;">"fr"</span>
     Option <span style="color: #2d9574;">"XkbModel"</span> <span style="color: #2d9574;">"pc105"</span>
     Option <span style="color: #2d9574;">"XkbVariant"</span> <span style="color: #2d9574;">"azerty"</span>
     Option <span style="color: #2d9574;">"XkbOptions"</span> <span style="color: #2d9574;">"grp:alt_shift_toggle"</span>
EndSection
</pre>
</div></li>
</ul>

<p>
<a href="https://wiki.archlinux.org/index.php/Keyboard_configuration_in_Xorg">Source : Archlinux</a>
</p>
</div>
</div>

<div id="outline-container-orgheadline34" class="outline-3">
<h3 id="orgheadline34"><span class="section-number-3">1.3</span> Outils vfat (FAT32)</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Pour obtenir les commandes utilisant le système de fichier vfat (ex: "mkfs.vfat")
</p>
<div class="org-src-container">

<pre class="src src-bash">emerge -av sys-fs/dosfstools
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline37" class="outline-3">
<h3 id="orgheadline37"><span class="section-number-3">1.4</span> Support du NTFS</h3>
<div class="outline-text-3" id="text-1-4">
</div><div id="outline-container-orgheadline35" class="outline-4">
<h4 id="orgheadline35"><span class="section-number-4">1.4.1</span> Kernel</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Modifications à effectuer dans le Kernel :
</p>
<ul class="org-ul">
<li><p>
Enabling NTFS using sys-fs/ntfs3g (preferred)
</p>
<div class="org-src-container">

<pre class="src src-text">File systems  ---&gt; 
   &lt;*&gt; FUSE (Filesystem in Userspace) support
</pre>
</div></li>

<li><p>
Enabling NTFS with limited write support
</p>
<div class="org-src-container">

<pre class="src src-text">File systems  ---&gt;
  DOS/FAT/NT Filesystems  ---&gt;
     &lt;*&gt; NTFS file system support
     &lt;*&gt;   NTFS write support
</pre>
</div></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline36" class="outline-4">
<h4 id="orgheadline36"><span class="section-number-4">1.4.2</span> Outil</h4>
<div class="outline-text-4" id="text-1-4-2">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">emerge -av sys-fs/ntfs3g</span>
</pre>
</div>
<p>
<a href="https://wiki.gentoo.org/wiki/NTFS">Source : Gentoo</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline38" class="outline-3">
<h3 id="orgheadline38"><span class="section-number-3">1.5</span> Emacs et polices de caractères</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Il faut activer le USE flag "xft" et compiler Emacs avec.
</p>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #7590db;">USE</span>=<span style="color: #2d9574;">"xft"</span>
</pre>
</div>
<p>
<a href="https://wiki.gentoo.org/wiki/Xft_support_for_GNU_Emacs">Source 1 : Gentoo</a>
</p>

<p>
<a href="https://wiki.gentoo.org/wiki/Project:GNU_Emacs/Developer_guide">Source 2 : Gentoo</a>
</p>
</div>
</div>
<div id="outline-container-orgheadline43" class="outline-3">
<h3 id="orgheadline43"><span class="section-number-3">1.6</span> Support du NFS</h3>
<div class="outline-text-3" id="text-1-6">
</div><div id="outline-container-orgheadline39" class="outline-4">
<h4 id="orgheadline39"><span class="section-number-4">1.6.1</span> Kernel</h4>
<div class="outline-text-4" id="text-1-6-1">
<p>
Modificiations à effectuer dans le Kernel :
</p>
<div class="org-src-container">

<pre class="src src-text">File systems ---&gt;
  [*] Dnotify support
  [*] Network File Systems ---&gt;
        &lt;*&gt;   NFS client support
        &lt;*&gt;     NFS client support for NFS version 3
        &lt;*&gt;     NFS client support for NFS version 4
        [*]   NFS client support for NFSv4.1
        &lt;*&gt;   NFS server support
        [*]     NFS server support for NFS version 3
        [*]     NFS server support for NFS version 4
        [*]       NFSv4.1 server support for Parallel NFS (pNFS)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline40" class="outline-4">
<h4 id="orgheadline40"><span class="section-number-4">1.6.2</span> Outil</h4>
<div class="outline-text-4" id="text-1-6-2">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">emerge --ask net-fs/nfs-utils</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline41" class="outline-4">
<h4 id="orgheadline41"><span class="section-number-4">1.6.3</span> OpenRC</h4>
<div class="outline-text-4" id="text-1-6-3">
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">rc-update add nfsclient default</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline42" class="outline-4">
<h4 id="orgheadline42"><span class="section-number-4">1.6.4</span> Exemple de montage</h4>
<div class="outline-text-4" id="text-1-6-4">
<pre class="example">
# mount 192.168.0.1:/volume1/home /home
</pre>
<p>
<a href="https://wiki.gentoo.org/index.php?title=Nfs-utils&amp;redirect=no">Source : Gentoo</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline46" class="outline-3">
<h3 id="orgheadline46"><span class="section-number-3">1.7</span> cmus-notify</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Permet de gérer le client cmus
</p>
</div>
<div id="outline-container-orgheadline44" class="outline-4">
<h4 id="orgheadline44"><span class="section-number-4">1.7.1</span> Script</h4>
<div class="outline-text-4" id="text-1-7-1">
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">!/bin/</span><span style="color: #4f97d7; font-weight: bold;">sh</span>
<span style="color: #7590db;">Cmus_remote</span>=$<span style="color: #4f97d7;">(</span>cmus-remote -Q<span style="color: #4f97d7;">)</span>
<span style="color: #7590db;">Instance</span>=$<span style="color: #4f97d7;">(</span><span style="color: #4f97d7;">echo</span> -e <span style="color: #2d9574;">"$Cmus_remote"</span> | wc -l<span style="color: #4f97d7;">)</span>
<span style="color: #7590db;">Shuffle</span>=<span style="color: #2d9574;">"Shuffle On"</span>
<span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #4f97d7;">[</span> $<span style="color: #7590db;">Instance</span> = <span style="color: #a45bad;">1</span> <span style="color: #4f97d7;">]</span>; <span style="color: #4f97d7; font-weight: bold;">then</span>
    terminal -e cmus &amp;&amp;
    sleep <span style="color: #a45bad;">2</span>
    cmus-remote -p
<span style="color: #4f97d7; font-weight: bold;">else</span>
    <span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #4f97d7;">[</span> $<span style="color: #a45bad;">1</span> == <span style="color: #2d9574;">"-S"</span> <span style="color: #4f97d7;">]</span>; <span style="color: #4f97d7; font-weight: bold;">then</span>
        <span style="color: #4f97d7; font-weight: bold;">if</span> <span style="color: #4f97d7;">[</span> <span style="color: #fa8072;">`echo "$Cmus_remote" | grep shuffle | cut -d ' ' -f 3`</span> == true <span style="color: #4f97d7;">]</span>; <span style="color: #4f97d7; font-weight: bold;">then</span>
            <span style="color: #7590db;">Shuffle</span>=<span style="color: #2d9574;">"Shuffle Off"</span>
        <span style="color: #4f97d7; font-weight: bold;">fi</span>
        cmus-remote $<span style="color: #a45bad;">1</span>
        notify-send -t <span style="color: #a45bad;">800</span> $<span style="color: #7590db;">Shuffle</span>
    <span style="color: #4f97d7; font-weight: bold;">elif</span> <span style="color: #4f97d7;">[</span> $<span style="color: #a45bad;">1</span> == <span style="color: #2d9574;">"-Q"</span> <span style="color: #4f97d7;">]</span>; <span style="color: #4f97d7; font-weight: bold;">then</span>
        <span style="color: #7590db;">Cur_song</span>=$<span style="color: #4f97d7;">(</span><span style="color: #4f97d7;">echo</span> <span style="color: #2d9574;">"$Cmus_remote"</span> | grep tag | head -n <span style="color: #a45bad;">3</span> | sort -r | cut -d <span style="color: #2d9574;">' '</span> -f <span style="color: #a45bad;">3-</span> <span style="color: #4f97d7;">)</span>
        notify-send -i multimedia-volume-control -t <span style="color: #a45bad;">1800</span> <span style="color: #2d9574;">"$Cur_song"</span>
<span style="color: #2aa1ae; background-color: #292e34;">#        </span><span style="color: #2aa1ae; background-color: #292e34;">artist=$(echo -e "$Cur_song" | head -n 2 | tail -n 1)</span>
<span style="color: #2aa1ae; background-color: #292e34;">#        </span><span style="color: #2aa1ae; background-color: #292e34;">title=$(echo -e "$Cur_song" | head -n 1 )</span>
<span style="color: #2aa1ae; background-color: #292e34;">#        </span><span style="color: #2aa1ae; background-color: #292e34;">cmus-updatepidgin artist "$artist" title "$title"</span>
    <span style="color: #4f97d7; font-weight: bold;">else</span>
        cmus-remote $<span style="color: #a45bad;">1</span>
        <span style="color: #7590db;">Cur_song</span>=$<span style="color: #4f97d7;">(</span>cmus-remote -Q | grep tag | head -n <span style="color: #a45bad;">3</span> | sort -r | cut -d <span style="color: #2d9574;">' '</span> -f <span style="color: #a45bad;">3-</span> <span style="color: #4f97d7;">)</span>
        notify-send -i multimedia-volume-control -t <span style="color: #a45bad;">1800</span> <span style="color: #2d9574;">"$Cur_song"</span>
    <span style="color: #4f97d7; font-weight: bold;">fi</span>
<span style="color: #4f97d7; font-weight: bold;">fi</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline45" class="outline-4">
<h4 id="orgheadline45"><span class="section-number-4">1.7.2</span> Fonctionnement</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
Utiliser le script en spécifiant un argument (cf. '-p') reconnu par cmus-remote
</p>

<p>
Infos sur les arguments :
</p>
<div class="org-src-container">

<pre class="src src-bash">man cmus-remote
</pre>
</div>

<p>
Exemple :
</p>
<pre class="example">
cmus-notify.sh -p #Permet de jouer le morceau sélectionné
</pre>

<p>
<a href="https://colorathis.wordpress.com/2013/06/25/cmus-notify/">Source : colorathis.wordpress.com</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline47" class="outline-3">
<h3 id="orgheadline47"><span class="section-number-3">1.8</span> OpenVPN</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Le module TUN/TAP est nécessaire au bon fonctionnement d'OpenVPN : ne pas oublier de l'intégrer au Kernel.
</p>

<p>
<a href="https://wiki.gentoo.org/wiki/OpenVPN">Source : Gentoo</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline57" class="outline-2">
<h2 id="orgheadline57"><span class="section-number-2">2</span> Général</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline49" class="outline-3">
<h3 id="orgheadline49"><span class="section-number-3">2.1</span> Compatibilité R.A.T.3</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Editer "/etc/X11/xorg.conf"
</p>
<div class="org-src-container">

<pre class="src src-shell">Section <span style="color: #2d9574;">"InputClass"</span>
Identifier <span style="color: #2d9574;">"Mouse Remap"</span>
MatchProduct <span style="color: #2d9574;">"Saitek Cyborg R.A.T.3 Mouse"</span>
MatchDevicePath <span style="color: #2d9574;">"/dev/input/event*"</span>
Option <span style="color: #2d9574;">"ButtonMapping"</span> <span style="color: #2d9574;">"1 2 3 4 5 0 0 8 9 0 0 0 13 14"</span>
EndSection
</pre>
</div>
<p>
<a href="http://forums.fedora-fr.org/viewtopic.php?id=64212">Source : forum fedora-fr</a>
</p>
</div>
</div>
<div id="outline-container-orgheadline50" class="outline-3">
<h3 id="orgheadline50"><span class="section-number-3">2.2</span> Réactiver le son après une sortie de veille</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>Editer "/etc/default/acpi-support"</li>

<li>Remplacer :</li>
</ul>
<div class="org-src-container">

<pre class="src src-shell"><span style="color: #7590db;">HIBERNATE_MODE</span>=shutdown
</pre>
</div>

<ul class="org-ul">
<li>Par :</li>
</ul>
<div class="org-src-container">

<pre class="src src-shell"><span style="color: #7590db;">HIBERNATE_MODE</span>=platform
</pre>
</div>

<div class="warning">
<p>
Selon le système d'exploitation, mon ordinateur n'a pas répondu de la même façon. Dans certains cas, cela a entraîné de nombreux bugs avec les raccourcis natifs (FN&#x2026;) : touches son non-reconnues par exemple.
</p>

</div>
</div>
</div>
<div id="outline-container-orgheadline52" class="outline-3">
<h3 id="orgheadline52"><span class="section-number-3">2.3</span> KDE</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-orgheadline51" class="outline-4">
<h4 id="orgheadline51"><span class="section-number-4">2.3.1</span> Activer la touche Windows pour afficher le launcher</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
Installer "KSuperkey"
</p>
<div class="org-src-container">

<pre class="src src-bash">dnf copr enable vanoudt/KSuperkey 
dnf install ksuperkey
</pre>
</div>
<p>
<a href="https://github.com/hanschen/ksuperkey">Source : Github</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline53" class="outline-3">
<h3 id="orgheadline53"><span class="section-number-3">2.4</span> Transformer un .deb en .rpm</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li>Télécharger alien</li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">dnf install alien
</pre>
</div>

<ul class="org-ul">
<li>Transformer le <i>.deb</i> en <i>.rpm</i></li>
</ul>
<div class="org-src-container">

<pre class="src src-bash">alien -r fichier.deb
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline54" class="outline-3">
<h3 id="orgheadline54"><span class="section-number-3">2.5</span> Mettre flash-player sur Firefox</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li>Télécharger le tarball de flash-player sur le site officiel d'Adobe</li>
<li>Place le fichier <i>libflashplayer.so</i> dans ~/.mozilla/plugins/</li>
<li>Redémarrer le navigateur</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline55" class="outline-3">
<h3 id="orgheadline55"><span class="section-number-3">2.6</span> Gérer l'audio avec pactl</h3>
<div class="outline-text-3" id="text-2-6">
<ul class="org-ul">
<li>Avantages</li>
</ul>
<p>
Facilité de gestion du son (monter, descendre ou muter cartes son), possibilité d'aller au dessus de 100% (!)
</p>

<ul class="org-ul">
<li>Contexte</li>
</ul>
<p>
Problème pour gérer deux cartes sons distinctes (sortie externe hdmi nvidia et son interne).
</p>

<div class="warning">
<p>
Etant sur XFCE4 et sachant que je dois modifier les raccourcis FN pour le son, il faut supprimer le package <i>xfce4-volumed</i> qui gère les raccourcis et l'animation correspond aux variations de volume.
</p>

</div>

<ul class="org-ul">
<li>Application</li>
</ul>
<p>
Voici les différentes commandes que j'utilise : 
</p>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Pour la sortie hdmi</span>
pactl set-sink-mute alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1 toggle <span style="color: #2aa1ae; background-color: #292e34;">#</span><span style="color: #2aa1ae; background-color: #292e34;">Mute si le son est activ&#233; et unmute s'il est d&#233;j&#224; mute</span>
pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1 +10% <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Augmente le son de 10% (au-del&#224; de 100%, c'est possible !)</span>
pactl set-sink-volume alsa_output.pci-0000_01_00.1.hdmi-stereo-extra1 -10% <span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Diminue le son de 10%</span>

<span style="color: #2aa1ae; background-color: #292e34;"># </span><span style="color: #2aa1ae; background-color: #292e34;">Pour la sortie interne</span>
pactl set-sink-mute alsa_output.pci-0000_00_1b.0.analog-stereo toggle
pactl set-sink-volume alsa_output.pci-0000_00_1b.0.analog-stereo +10%
pactl set-sink-volume alsa_output.pci-0000_00_1b.0.analog-stereo -10%
</pre>
</div>

<div class="note">
<p>
Note : il est possible d'optimiser le nom (très long) des sorties à l'aide du fichier de configuration utilisateur.
</p>

</div>
</div>
</div>

<div id="outline-container-orgheadline56" class="outline-3">
<h3 id="orgheadline56"><span class="section-number-3">2.7</span> Activer le pavé numérique au démarrage de LightDM</h3>
<div class="outline-text-3" id="text-2-7">
<ul class="org-ul">
<li>Installer <i>numlockx</i></li>
<li>Modifier le fichier <b>/etc/lightdm/lightdm.conf</b></li>
</ul>
<div class="org-src-container">

<pre class="src src-bash"><span style="color: #4f97d7;">[</span>Seat:*<span style="color: #4f97d7;">]</span>
greeter-setup-script=/usr/bin/numlockx on
</pre>
</div>

<p>
<a href="https://wiki.archlinux.org/index.php/LightDM#NumLock_on_by_default">Source : Archlinux</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline63" class="outline-2">
<h2 id="orgheadline63"><span class="section-number-2">3</span> Technique</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orgheadline62" class="outline-3">
<h3 id="orgheadline62"><span class="section-number-3">3.1</span> Bash</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-orgheadline58" class="outline-4">
<h4 id="orgheadline58"><span class="section-number-4">3.1.1</span> Liens utiles</h4>
<div class="outline-text-4" id="text-3-1-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Liens</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="http://mywiki.wooledge.org/BashFAQ">FAQ Bash</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://mywiki.wooledge.org/BashGuide">Guide Bash</a></td>
</tr>

<tr>
<td class="org-left"><a href="https://www.gnu.org/software/bash/manual/">Manuel GNU Bash</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://wiki.bash-hackers.org/">bash-hackers wiki</a></td>
</tr>

<tr>
<td class="org-left"><a href="http://git.savannah.gnu.org/cgit/bash.git/log/?h=devel">Forge git bash</a></td>
</tr>

<tr>
<td class="org-left"><a href="https://lists.gnu.org/mailman/listinfo/help-bash">GNU bash help</a></td>
</tr>

<tr>
<td class="org-left"><a href="https://github.com/koalaman/shellcheck">ShellCheck (cf. flycheck sur Emacs)</a></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgheadline59" class="outline-4">
<h4 id="orgheadline59"><span class="section-number-4">3.1.2</span> Commandes utiles</h4>
<div class="outline-text-4" id="text-3-1-2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Commande</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="http://wiki.bash-hackers.org/howto/getopts_tutorial">getopts (gestion arguments)</a></td>
<td class="org-left">Gestion intelligente d'arguments dans une commande</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgheadline60" class="outline-4">
<h4 id="orgheadline60"><span class="section-number-4">3.1.3</span> Convertir une variable en base X</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
Exemple avec une conversion en base 10
</p>
<div class="org-src-container">

<pre class="src src-sh"><span style="color: #7590db;">newvar</span>=$<span style="color: #4f97d7;">(</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">10#</span>$<span style="color: #7590db;">var</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">)</span>;
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline61" class="outline-4">
<h4 id="orgheadline61"><span class="section-number-4">3.1.4</span> Correction intelligente de script</h4>
<div class="outline-text-4" id="text-3-1-4">
<ul class="org-ul">
<li>Installer <a href="https://github.com/koalaman/shellcheck">ShellCheck</a></li>
<li>Passer le script en argument pour en avoir l'analyse :</li>
</ul>
<div class="org-src-container">

<pre class="src src-sh">shellcheck monscript
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-orgheadline80" class="outline-2">
<h2 id="orgheadline80"><span class="section-number-2">4</span> Applications</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-orgheadline64" class="outline-3">
<h3 id="orgheadline64"><span class="section-number-3">4.1</span> Skype - désactiver le lancement au démarrage</h3>
<div class="outline-text-3" id="text-4-1">
<div class="org-src-container">

<pre class="src src-shell">rm -f /etc/prelink.conf.d/skype.conf
</pre>
</div>
</div>
</div>
<div id="outline-container-orgheadline65" class="outline-3">
<h3 id="orgheadline65"><span class="section-number-3">4.2</span> Tmux</h3>
<div class="outline-text-3" id="text-4-2">
<p>
Commande pour rejoindre la session "home" ou la créer si elle n'existe pas
</p>
<pre class="example">
tmux new -A -s home
</pre>
</div>
</div>
<div id="outline-container-orgheadline67" class="outline-3">
<h3 id="orgheadline67"><span class="section-number-3">4.3</span> Terminal</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-orgheadline66" class="outline-4">
<h4 id="orgheadline66"><span class="section-number-4">4.3.1</span> [Préférence] Changer la police de caractère du terminal</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
Utiliser <code>Meslo LG M DZ for Powerline</code> taille <code>9.0</code>
</p>

<p>
<a href="https://github.com/andreberg/Meslo-Font">Polices disponibles sur Github</a>
</p>
</div>
</div>
</div>
<div id="outline-container-orgheadline79" class="outline-3">
<h3 id="orgheadline79"><span class="section-number-3">4.4</span> Emacs</h3>
<div class="outline-text-3" id="text-4-4">
</div><div id="outline-container-orgheadline68" class="outline-4">
<h4 id="orgheadline68"><span class="section-number-4">4.4.1</span> Problème de police avec Emacs</h4>
<div class="outline-text-4" id="text-4-4-1">
<p>
cf. Gentoo/Emacs et polices de caractères
</p>
</div>
</div>
<div id="outline-container-orgheadline69" class="outline-4">
<h4 id="orgheadline69"><span class="section-number-4">4.4.2</span> Avoir la météo</h4>
<div class="outline-text-4" id="text-4-4-2">
<p>
Package : <i>wttrin</i>
</p>

<p>
<a href="https://github.com/bcbcarl/emacs-wttrin">Source : Github</a>
</p>
</div>
</div>
<div id="outline-container-orgheadline70" class="outline-4">
<h4 id="orgheadline70"><span class="section-number-4">4.4.3</span> Exporter en html avec coloration syntaxique des <i>src</i></h4>
<div class="outline-text-4" id="text-4-4-3">
<p>
Package : <i>htmlize</i>
</p>

<p>
<a href="https://github.com/emacsmirror/htmlize">Source : Github</a>
</p>
</div>
</div>
<div id="outline-container-orgheadline72" class="outline-4">
<h4 id="orgheadline72"><span class="section-number-4">4.4.4</span> org-mode</h4>
<div class="outline-text-4" id="text-4-4-4">
</div><ol class="org-ol"><li><a id="orgheadline71"></a>Indentation automatique<br  /><div class="outline-text-5" id="text-4-4-4-1">
<p>
Activer <i>org-indent-mode</i>
</p>
</div></li></ol>
</div>
<div id="outline-container-orgheadline73" class="outline-4">
<h4 id="orgheadline73"><span class="section-number-4">4.4.5</span> Correction automatique scripts shell avec ShellCheck</h4>
<div class="outline-text-4" id="text-4-4-5">
<p>
Activer flycheck : <i>flycheck-mode</i>, la correction se fait ensuite automatiquement avec <i>ShellCheck</i>.
</p>
</div>
</div>
<div id="outline-container-orgheadline78" class="outline-4">
<h4 id="orgheadline78"><span class="section-number-4">4.4.6</span> Faire des présentations avec org-mode et Reveal.js</h4>
<div class="outline-text-4" id="text-4-4-6">
<p>
Permet de faire des présentations avec Reveal.js en utilisant org-mode
</p>
</div>
<ol class="org-ol"><li><a id="orgheadline74"></a>Liens importants<br  /><div class="outline-text-5" id="text-4-4-6-1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Lien</th>
<th scope="col" class="org-left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><a href="https://github.com/hakimel/reveal.js/">reveal.js - Github</a></td>
<td class="org-left">Repos Github du framework javascript</td>
</tr>

<tr>
<td class="org-left"><a href="https://github.com/yjwen/org-reveal/">org-reveal - Github</a></td>
<td class="org-left">Repos Github du package org-mode pour gérer reveal.js</td>
</tr>

<tr>
<td class="org-left"><a href="https://github.com/hakimel/reveal.js/wiki/Keyboard-Shortcuts">Raccourcis clavier</a></td>
<td class="org-left">Raccourcis clavier disponibles en présentation</td>
</tr>

<tr>
<td class="org-left"><a href="http://nwidger.github.io/blog/post/making-a-reveal.js-presentation-with-org-reveal/">Exemple de présentation</a></td>
<td class="org-left">Exemple/Tutoriel de l'utilisation de org-reveal</td>
</tr>
</tbody>
</table>
</div></li>
<li><a id="orgheadline75"></a>Instructions<br  /><div class="outline-text-5" id="text-4-4-6-2">
<ul class="org-ul">
<li>Télécharger reveal.js l'extraire et le renommer <i>reveal.js</i> (sinon préciser son emplacement avec <b>#+REVEAL_ROOT: <a href="file://d:/reveal.js">file://d:/reveal.js</a></b>)</li>
<li>Installer le package <i>ox-reveal.el</i> (et <i>htmlize.el</i> pour la coloration syntaxique) sur Emacs</li>
<li>Créer un fichier <i>.org</i></li>
<li><p>
Si la librarie n'est pas chargée, faire <b>M-x load-library</b> et entrer <b>ox-reveal</b>
</p>

<div class="note">
<p>
Pour exporter en html : <b>C-c C-e R R</b>
</p>

</div></li>
</ul>
</div></li>
<li><a id="orgheadline76"></a>Notes<br  /><div class="outline-text-5" id="text-4-4-6-3">
<ul class="org-ul">
<li>Pour fragmenter l'apparition d'une liste (placer au dessus de la liste) : <b>#+ATTR_REVEAL: :frag (appear)</b></li>
<li>Pour enlever le sommaire, la datation et la numérotation <b>#+OPTIONS: toc:nil timestamp:nil num:nil</b></li>
<li>Pour afficher des notes pour le présentateur : <b>#+BEGIN_NOTES blabla #+END_NOTES</b></li>
<li>Paramétrer les effets de slide : <b>#+REVEAL_TRANS: slide</b></li>
</ul>
</div></li>
<li><a id="orgheadline77"></a>Raccourcis<br  /><div class="outline-text-5" id="text-4-4-6-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Touche</th>
<th scope="col" class="org-left">Raccourci</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><b>Haut/Bas/Gauche/Droite</b></td>
<td class="org-left">Changer de slide</td>
</tr>

<tr>
<td class="org-left"><b>f</b></td>
<td class="org-left">Plein écran</td>
</tr>

<tr>
<td class="org-left"><b>s</b></td>
<td class="org-left">Affichage pour le présentateur</td>
</tr>

<tr>
<td class="org-left"><b>o</b></td>
<td class="org-left">Aperçu des slides</td>
</tr>

<tr>
<td class="org-left"><b>.</b> ou <b>b</b></td>
<td class="org-left">Rend l'écran noir</td>
</tr>
</tbody>
</table>
</div></li></ol>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: lturpinat</p>
<p class="date">Created: 2016-11-01 mar. 19:15</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
